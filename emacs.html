<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2024-02-03 Sat 15:47 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Emacs Configuration</title>
<meta name="author" content="ape" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Emacs Configuration</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgea25446">System Dependent Variables</a></li>
<li><a href="#org5a4cc1a">Setup</a>
<ul>
<li><a href="#org7fc4e0c">Auto-tangle</a></li>
<li><a href="#org7fa7020">Packages and Management</a></li>
</ul>
</li>
<li><a href="#org9f68684">General Emacs</a>
<ul>
<li><a href="#orgf8a4a9a">UI Configurations</a>
<ul>
<li><a href="#org4fe4d5f">Basic</a></li>
<li><a href="#org797f91a">Backup files</a></li>
<li><a href="#orgbf48dc2">Transparency</a></li>
<li><a href="#orgae75d9d">Scrolling</a></li>
<li><a href="#org7fe7057">Undo-tree</a></li>
<li><a href="#orgfb04ce8">Modeline</a></li>
<li><a href="#org90e136e">Auto-clean white space</a></li>
</ul>
</li>
<li><a href="#org01d286d">Keybindings</a></li>
<li><a href="#org7124d9a">Dired</a></li>
<li><a href="#org7b7626b">Proced</a></li>
<li><a href="#org950de88">Native Compilation</a></li>
<li><a href="#org6e551dc"><span class="todo TODO">TODO</span> Goto last change</a></li>
<li><a href="#org384508b">Input Buffer, Directory Search</a>
<ul>
<li><a href="#org621e659">Ivy, Ivy-Rich, and Counsel</a></li>
<li><a href="#orgba59beb">Ivy-Rich</a></li>
<li><a href="#orgbe9bd47">Ivy-prescient</a></li>
<li><a href="#org5518d14">Counsel</a></li>
</ul>
</li>
<li><a href="#orgb966046">Helpful and Which-key</a>
<ul>
<li><a href="#org06db446">Helpful</a></li>
<li><a href="#org26c8ffe">Which-key</a></li>
</ul>
</li>
<li><a href="#orgb2089ee">Font size</a></li>
<li><a href="#orgb3f9a6e">General Helper Function</a>
<ul>
<li><a href="#orgd15e3f3">jmn-load-init</a></li>
<li><a href="#org4e5bdeb">jmn-vscode-current-buffer-file-at-point</a></li>
<li><a href="#orgc0306fd">jmn-remove-M-1-9-from-mode-map</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org03d49d5">General Development</a>
<ul>
<li><a href="#orgd440653">Indentation</a></li>
<li><a href="#org436a5e0">Prog-mode</a></li>
<li><a href="#org65be41b">Parens/delimiters</a>
<ul>
<li><a href="#org9550297"><span class="todo TODO">TODO</span> Rainbow Delimiters</a></li>
<li><a href="#org093755c">Smartparens</a></li>
</ul>
</li>
<li><a href="#org8201176">Magit</a></li>
<li><a href="#org9988998">Git-Gutter</a></li>
<li><a href="#orgb0751a3">Highlight-indent-guide</a></li>
<li><a href="#orge7cce96">Company-Mode</a>
<ul>
<li><a href="#org76f2eaa">company-box-mode</a></li>
<li><a href="#org115a4bb">company-prescient</a></li>
</ul>
</li>
<li><a href="#org60650d6">Treemacs</a></li>
<li><a href="#orgd1b4b7d">Eglot</a></li>
<li><a href="#orga8787fa">CMake</a>
<ul>
<li><a href="#org1f86e8c">CMake-mode</a></li>
<li><a href="#org94787eb"><span class="todo TODO">TODO</span> CMake project</a></li>
</ul>
</li>
<li><a href="#orgad0b100">Yasnippet</a></li>
<li><a href="#org7dc5729"><span class="todo TODO">TODO</span> Flyspell</a></li>
<li><a href="#orgce74928"><span class="todo TODO">TODO</span> Evil nerd commenter</a></li>
<li><a href="#org606e1c2">Tree Sitter Highlighting</a></li>
<li><a href="#org822f641">Ripgrep</a></li>
<li><a href="#org31ce83f">YAML</a></li>
<li><a href="#orgeb2f813">Docker</a></li>
<li><a href="#org82e5a6f"><span class="todo TODO">TODO</span> Compilation mode in async output</a></li>
<li><a href="#org9ff8bff">Devdocs</a></li>
<li><a href="#org936995b">Pure Dev Tools</a>
<ul>
<li><a href="#orge75b0fc">smerge</a></li>
<li><a href="#org932b7e7">Tab completion</a></li>
<li><a href="#org731b1e7">vc-mode</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org7632c3b">Languages</a>
<ul>
<li><a href="#org8f2569d">Emacs-lisp</a></li>
<li><a href="#org97cc13e">Bash</a></li>
<li><a href="#org304bbdd">Python</a>
<ul>
<li><a href="#orgf040c08"><span class="todo TODO">TODO</span> Jupyter Notebooks</a></li>
<li><a href="#orgf7e26c8">Pyvenv</a></li>
<li><a href="#org7a67610">Python-mode</a></li>
<li><a href="#org0535c81">Hook</a></li>
</ul>
</li>
<li><a href="#orgfcd4df6">C/C++</a>
<ul>
<li><a href="#orgcc39379">Compilation Buffer</a></li>
<li><a href="#orgb8c6968">Hook</a></li>
</ul>
</li>
<li><a href="#org23f93f5">Octave</a></li>
<li><a href="#org04a3205">Markdown</a></li>
</ul>
</li>
<li><a href="#org72da704">Org-Mode</a>
<ul>
<li><a href="#org9eb231d">Mode setup</a></li>
<li><a href="#org0645f0f">Fonts</a></li>
<li><a href="#orgf482063">Start</a></li>
<li><a href="#org27866ff">Bullets</a></li>
<li><a href="#org26361de">Center column and line wrapping</a></li>
<li><a href="#org2ad622f">Org-babel</a></li>
<li><a href="#orgb460c04">Inline latex</a></li>
<li><a href="#org2c6f467">Keybindings</a></li>
<li><a href="#org4f806a7">HTML</a>
<ul>
<li><a href="#org474a696">htmlize</a></li>
<li><a href="#orgc007ae6">Save to HTML on save</a></li>
<li><a href="#orgfcf6659">Make Read The Org setup file safe</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgfa8059c">Agenda and GTD</a>
<ul>
<li><a href="#orgf60dca9">General</a></li>
<li><a href="#org3bb5e5b">Habits</a></li>
<li><a href="#org6a1d59f">Capture Templates</a></li>
<li><a href="#org522f9a3">Archive</a></li>
<li><a href="#org7296a08">Process Inbox Item</a></li>
<li><a href="#org70b9d04">Advice</a></li>
<li><a href="#orgd39e41f">Keybindings</a></li>
</ul>
</li>
<li><a href="#orgb53eb1d">Terminals</a>
<ul>
<li><a href="#org0ed214b">term-mode</a>
<ul>
<li><a href="#org5debbad">Keybindings</a></li>
<li><a href="#orgbc269b6">Better term-mode colors</a></li>
</ul>
</li>
<li><a href="#org4768b31">vterm</a></li>
</ul>
</li>
<li><a href="#orgadf7fda">Theme and Frame</a>
<ul>
<li><a href="#org5cc92be">Setup and helpers</a></li>
<li><a href="#org356d0e0">Theme Packages</a>
<ul>
<li><a href="#org3488cb9">Gruvbox</a></li>
</ul>
</li>
<li><a href="#org88341b1">Pure Themes</a></li>
<li><a href="#org2d2c248">Frame Height</a></li>
<li><a href="#org3512f54">Default and time switches</a></li>
</ul>
</li>
<li><a href="#org07d5fef">Shell Backend and Windows Core Setup</a>
<ul>
<li><a href="#org8fedc49">Linux</a></li>
<li><a href="#org7b1ff41">Windows</a></li>
</ul>
</li>
<li><a href="#orge53e95d">Hacky Fixes</a>
<ul>
<li><a href="#org8d7fb9f">Corrects error: File mode specification error: (error Invalid image type ‘svg’) (not used)</a></li>
<li><a href="#orgdf42a23">Keep transparency when toggling to full-screen in Emacs 29+</a></li>
<li><a href="#orgb16c00d">Transparency in term (<code>emacs -nw</code>)</a></li>
</ul>
</li>
<li><a href="#org3bc8ea1">Startup and Tabs</a>
<ul>
<li><a href="#org6f456e0">Recentf</a></li>
<li><a href="#org66c2659">Tabs</a></li>
<li><a href="#orgc28fef1">Dashboard</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgea25446" class="outline-2">
<h2 id="orgea25446">System Dependent Variables</h2>
<div class="outline-text-2" id="text-orgea25446">
<p>
Hopefully only need to change these to get setup on a new machine.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defconst</span> <span style="color: #a0522d;">jmn-config-location</span> <span style="color: #8b2252;">"~/dotfiles/emacs.org"</span>
  <span style="color: #8b2252;">"Location of literate org file used to automaitically tangle to init.el"</span>)

(<span style="color: #a020f0;">let</span> ((gtd-path '((gnu/linux . <span style="color: #8b2252;">"~/Documents/gtd/"</span>)
                 (windows-nt . <span style="color: #8b2252;">"c:/Users/nehlsj/OneDrive/Documents/gtd/"</span>))))
  (<span style="color: #a020f0;">defconst</span> <span style="color: #a0522d;">jmn-gtd-directory</span> (alist-get system-type gtd-path)
  <span style="color: #8b2252;">"Location of gtd org files: projects, inbox, next,  whip, journal, and habits"</span>))

(<span style="color: #a020f0;">defconst</span> <span style="color: #a0522d;">jmn-connected-systems</span> '(<span style="color: #8b2252;">"lat"</span> <span style="color: #8b2252;">"dsk"</span> <span style="color: #8b2252;">"xps"</span>)
  <span style="color: #8b2252;">"Systems which should download packages. Others get the '</span><span style="color: #008b8b;">pure</span><span style="color: #8b2252;">' configuration."</span>)

(<span style="color: #a020f0;">defconst</span> <span style="color: #a0522d;">jmn-connected-beauty</span> nil
  <span style="color: #8b2252;">"Flag of weather to use the purely astetic packages or not on connected system"</span>)

(<span style="color: #a020f0;">defconst</span> <span style="color: #a0522d;">jmn-pureplus-systems</span> '(<span style="color: #8b2252;">"lat"</span>)
  <span style="color: #8b2252;">"Systems which use the pure setup with the plus packages"</span>)

(<span style="color: #a020f0;">defconst</span> <span style="color: #a0522d;">jmn-dark-mode</span> t
  <span style="color: #8b2252;">"Do we want Emacs in a dark mode? Note: no dark-mode for windows as of now"</span>)

(<span style="color: #a020f0;">defconst</span> <span style="color: #a0522d;">jmn-font-height-alist</span> '((<span style="color: #8b2252;">"xps"</span> . 110)
                                  (<span style="color: #8b2252;">"dsk"</span> . 110)
                                  (<span style="color: #8b2252;">"lat"</span> . 115))
  <span style="color: #8b2252;">"Set text-hight for each machine-- default will be 100"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org5a4cc1a" class="outline-2">
<h2 id="org5a4cc1a">Setup</h2>
<div class="outline-text-2" id="text-org5a4cc1a">
</div>
<div id="outline-container-org7fc4e0c" class="outline-3">
<h3 id="org7fc4e0c">Auto-tangle</h3>
<div class="outline-text-3" id="text-org7fc4e0c">
<p>
This snippet adds a hook to <code>org-mode</code> buffers so that <code>efs/org-babel-tangle-config</code> gets executed each time such a buffer gets saved.  This function checks to see if the file being saved is the Emacs.org file you're looking at right now, and if so, automatically exports the configuration here to the associated output files.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Automatically tangle our Emacs.org config file when we save it</span>
(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">efs/org-babel-tangle-config</span> ()
  (<span style="color: #a020f0;">when</span> (string-equal (buffer-file-name)
                      (expand-file-name jmn-config-location))
    <span style="color: #b22222;">;; </span><span style="color: #b22222;">Dynamic scoping to the rescue</span>
    (<span style="color: #a020f0;">let</span> ((org-confirm-babel-evaluate nil))
      (org-babel-tangle))))

(add-hook 'org-mode-hook
          (<span style="color: #a020f0;">lambda</span> () (add-hook 'after-save-hook #'efs/org-babel-tangle-config)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7fa7020" class="outline-3">
<h3 id="org7fa7020">Packages and Management</h3>
<div class="outline-text-3" id="text-org7fa7020">
<p>
Archives: elpa is default, melpa is community.
Use-package is macro that is used like a package manager. <a href="https://github.com/jwiegley/use-package">Use-Package Documentation</a>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">if</span> (member system-name jmn-connected-systems)
    (<span style="color: #a020f0;">defconst</span> <span style="color: #a0522d;">jmn-pure</span> nil <span style="color: #8b2252;">"Indicating if we are pure or using packages"</span>)
  (<span style="color: #a020f0;">if</span> (member system-name jmn-pureplus-systems)
      (<span style="color: #a020f0;">defconst</span> <span style="color: #a0522d;">jmn-pure</span> <span style="color: #8b2252;">"plus"</span> <span style="color: #8b2252;">"Indicating we are using pure config with plus packages"</span>)
    (<span style="color: #a020f0;">defconst</span> <span style="color: #a0522d;">jmn-pure</span> t <span style="color: #8b2252;">"Indicating if we are pure, not using any packages"</span>)))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">flag</span>
(<span style="color: #a020f0;">defconst</span> <span style="color: #a0522d;">jmn-term</span> (not (display-graphic-p (selected-frame)))
  <span style="color: #8b2252;">"Indicating if emacs is being run within a terminal or not"</span>)

(<span style="color: #a020f0;">if</span> jmn-pure
    (<span style="color: #a020f0;">progn</span>
      (<span style="color: #a020f0;">defmacro</span> <span style="color: #0000ff;">use-package</span> (<span style="color: #228b22;">&amp;rest</span> _))  <span style="color: #b22222;">;; </span><span style="color: #b22222;">define use-package macro to do nothing</span>
      (<span style="color: #a020f0;">if</span> (string= jmn-pure <span style="color: #8b2252;">"plus"</span>) <span style="color: #b22222;">;; </span><span style="color: #b22222;">turn on all of the plus modes</span>
          (<span style="color: #a020f0;">progn</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">prescient</span>)
                 (<span style="color: #a020f0;">dolist</span> (pluslist '(which-key-mode undo-tree-mode ws-butler-mode prescient-persist-mode ivy-mode ivy-rich-mode ivy-prescient-mode counsel-mode))
                   (funcall pluslist 1)))))
  (<span style="color: #a020f0;">progn</span>  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Connect to the internet and use use-package macros to config below</span>
    (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">package</span>)
    (<span style="color: #a020f0;">setq</span> package-archives '((<span style="color: #8b2252;">"melpa"</span> . <span style="color: #8b2252;">"https://melpa.org/packages/"</span>)
                             (<span style="color: #8b2252;">"elpa"</span> . <span style="color: #8b2252;">"https://elpa.gnu.org/packages/"</span>)))
    (package-initialize)

    (<span style="color: #a020f0;">unless</span> package-archive-contents
      (package-refresh-contents))

    (<span style="color: #a020f0;">unless</span> (package-installed-p 'use-package)
      (package-install 'use-package))<span style="color: #b22222;">;; </span><span style="color: #b22222;">Initialize use-package on non-Linux platforms</span>

    (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">use-package</span>)
    (<span style="color: #a020f0;">setq</span> use-package-always-ensure t) <span style="color: #b22222;">; </span><span style="color: #b22222;">no need for :ensure t for each package.</span>
    (<span style="color: #a020f0;">setq</span> use-package-verbose t)) <span style="color: #b22222;">; </span><span style="color: #b22222;">log configure/loading messages in *Messages*</span>
  )

<span style="color: #b22222;">;; </span><span style="color: #b22222;">allows us to make sure environment packages are installed</span>
(<span style="color: #a020f0;">use-package</span> use-package-ensure-system-package
  <span style="color: #483d8b;">:ensure</span> t)

<span style="color: #b22222;">;; </span><span style="color: #b22222;">update your packages with=M-x auto-package-update-now= to update right now.</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9f68684" class="outline-2">
<h2 id="org9f68684">General Emacs</h2>
<div class="outline-text-2" id="text-org9f68684">
</div>
<div id="outline-container-orgf8a4a9a" class="outline-3">
<h3 id="orgf8a4a9a">UI Configurations</h3>
<div class="outline-text-3" id="text-orgf8a4a9a">
</div>
<div id="outline-container-org4fe4d5f" class="outline-4">
<h4 id="org4fe4d5f">Basic</h4>
<div class="outline-text-4" id="text-org4fe4d5f">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;;; </span><span style="color: #b22222;">Basic ;;;;</span>
(<span style="color: #a020f0;">setq</span> inhibit-startup-message t)                <span style="color: #b22222;">; </span><span style="color: #b22222;">inhibit startup message</span>
(tool-bar-mode -1)                            <span style="color: #b22222;">; </span><span style="color: #b22222;">remove toolbar</span>
(menu-bar-mode -1)                              <span style="color: #b22222;">; </span><span style="color: #b22222;">Disable the menu bar</span>
(scroll-bar-mode -1)                          <span style="color: #b22222;">; </span><span style="color: #b22222;">remove side scrollbar</span>
(tooltip-mode -1)                               <span style="color: #b22222;">; </span><span style="color: #b22222;">Disable tooltips</span>
(set-fringe-mode 6)                             <span style="color: #b22222;">; </span><span style="color: #b22222;">Give some breathing room</span>
(<span style="color: #a020f0;">setq</span> visible-bell t)                         <span style="color: #b22222;">; </span><span style="color: #b22222;">Set up the visible bell</span>
(save-place-mode 1)                             <span style="color: #b22222;">; </span><span style="color: #b22222;">Open file where last visited</span>
(<span style="color: #a020f0;">setq</span> Buffer-menu-name-width 35)                <span style="color: #b22222;">; </span><span style="color: #b22222;">give name more room</span>
(<span style="color: #a020f0;">setq-default</span> indicate-empty-lines t)           <span style="color: #b22222;">; </span><span style="color: #b22222;">indicate long lines</span>
(<span style="color: #a020f0;">defalias</span> '<span style="color: #0000ff;">yes-or-no-p</span> 'y-or-n-p)               <span style="color: #b22222;">; </span><span style="color: #b22222;">Make  =yes or no= prompts shorter</span>
(column-number-mode 1)                          <span style="color: #b22222;">; </span><span style="color: #b22222;">show column number in modeline</span>
(winner-mode 1)                                 <span style="color: #b22222;">; </span><span style="color: #b22222;">redo and undo window changes</span>
(<span style="color: #a020f0;">if</span> (version&lt;= <span style="color: #8b2252;">"28"</span> emacs-version)
    (repeat-mode 1))                 <span style="color: #b22222;">; </span><span style="color: #b22222;">multi-key sequences can be repeated</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">hooks</span>
(<span style="color: #a020f0;">if</span> jmn-pure
    (add-hook 'before-save-hook 'whitespace-cleanup))<span style="color: #b22222;">; </span><span style="color: #b22222;">non-pure uses ws-butler</span>
(<span style="color: #a020f0;">unless</span> (eq system-type 'windows-nt)
  (add-hook 'text-mode-hook 'flyspell-mode))    <span style="color: #b22222;">; </span><span style="color: #b22222;">enable spellcheck on text mode</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">The following help syncing</span>
(global-auto-revert-mode 1)                     <span style="color: #b22222;">; </span><span style="color: #b22222;">refresh buffer if changed on disk</span>
(<span style="color: #a020f0;">setq</span> auto-revert-use-notify nil)               <span style="color: #b22222;">; </span><span style="color: #b22222;">don't notify?</span>
(<span style="color: #a020f0;">setq</span> auto-revert-verbose nil)                  <span style="color: #b22222;">;</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Set scratch buffer to be in org-mode and modify initial message</span>
(<span style="color: #a020f0;">setq</span> initial-major-mode 'org-mode)
(<span style="color: #a020f0;">setq</span> initial-scratch-message <span style="color: #8b2252;">"**Scratch Buffer**\n\n"</span>)

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Open text files in Org-Mode</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(add-to-list 'auto-mode-alist '("\\.text\\'" . org-mode))</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(add-to-list 'auto-mode-alist '("\\.txt\\'" . org-mode))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org797f91a" class="outline-4">
<h4 id="org797f91a">Backup files</h4>
<div class="outline-text-4" id="text-org797f91a">
<p>
Save backups in <code>.emacs.d</code>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">setq</span> backup-directory-alist
      '( (<span style="color: #8b2252;">"."</span> . <span style="color: #8b2252;">"~/.emacs.d/filebackups"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbf48dc2" class="outline-4">
<h4 id="orgbf48dc2">Transparency</h4>
<div class="outline-text-4" id="text-orgbf48dc2">
<p>
Set transparency
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">transparency</span> (value)
  <span style="color: #8b2252;">"Sets the transparency of the frame window. 0=transparent/100=opaque"</span>
  (<span style="color: #a020f0;">interactive</span> <span style="color: #8b2252;">"nTransparency Value 0 - 100 opaque:"</span>)
  (<span style="color: #a020f0;">if</span> (version&lt;= <span style="color: #8b2252;">"29"</span> emacs-version)
      (set-frame-parameter nil 'alpha-background value)
    (set-frame-parameter (selected-frame) 'alpha value)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgae75d9d" class="outline-4">
<h4 id="orgae75d9d">Scrolling</h4>
<div class="outline-text-4" id="text-orgae75d9d">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;;; </span><span style="color: #b22222;">Scrolling ;;;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Fully redraw the display before it processes queued input events.</span>
(<span style="color: #a020f0;">setq</span> redisplay-dont-pause            t)

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Number of lines of continuity to retain when scrolling by full screens</span>
(<span style="color: #a020f0;">setq</span> next-screen-context-lines       2)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">golden ration pkg will replaced this if loaded</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">only '</span><span style="color: #008b8b;">jump</span><span style="color: #b22222;">' when moving this far off the screen</span>
(<span style="color: #a020f0;">setq</span> scroll-conservatively         100)
(<span style="color: #a020f0;">setq</span> scroll-step                     1) <span style="color: #b22222;">;; </span><span style="color: #b22222;">Keyboard scroll one line at a time</span>
(<span style="color: #a020f0;">setq</span> mouse-wheel-progressive-speed nil) <span style="color: #b22222;">;; </span><span style="color: #b22222;">Don't accelerate scrolling</span>
(<span style="color: #a020f0;">setq</span> mouse-wheel-follow-mouse        t) <span style="color: #b22222;">;; </span><span style="color: #b22222;">Scroll window under mouse</span>
(<span style="color: #a020f0;">setq</span> fast-but-imprecise-scrolling    t) <span style="color: #b22222;">;; </span><span style="color: #b22222;">No (setq less) lag while scrolling lots.</span>
(<span style="color: #a020f0;">setq</span> auto-window-vscroll           nil) <span style="color: #b22222;">;; </span><span style="color: #b22222;">Cursor move faster</span>
(<span style="color: #a020f0;">setq</span> pixel-scroll-precision-mode     1) <span style="color: #b22222;">;; </span><span style="color: #b22222;">pixel based scrolling</span>
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="orgf23359d"></a>Fast Scroll<br />
<div class="outline-text-5" id="text-orgf23359d">
<p>
To ensure scrolling is fast in Emacs, disable  non-essential things while the window is being scrolled:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> fast-scroll
  <span style="color: #483d8b;">:defer</span> 2
  <span style="color: #483d8b;">:config</span>
  (add-hook 'fast-scroll-start-hook (<span style="color: #a020f0;">lambda</span> () (flycheck-mode -1)))
  (add-hook 'fast-scroll-end-hook (<span style="color: #a020f0;">lambda</span> () (flycheck-mode 1)))
  (fast-scroll-config)
  (fast-scroll-mode 1))
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-org7fe7057" class="outline-4">
<h4 id="org7fe7057">Undo-tree</h4>
<div class="outline-text-4" id="text-org7fe7057">
<ul class="org-ul">
<li><code>C-x u</code> visualizes undo history as a tree for easy navigation</li>
<li><code>C-_</code> undo</li>
<li><code>M-_</code> redo
Archive: elpa</li>
</ul>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> undo-tree
  <span style="color: #483d8b;">:defer</span> 2
  <span style="color: #483d8b;">:config</span>
  (global-undo-tree-mode 1)
  (<span style="color: #a020f0;">setq</span> undo-tree-auto-save-history nil)) <span style="color: #b22222;">;; </span><span style="color: #b22222;">don't save ~undo-tree~ file</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfb04ce8" class="outline-4">
<h4 id="orgfb04ce8">Modeline</h4>
<div class="outline-text-4" id="text-orgfb04ce8">
<p>
<b>NOTE</b>: The first time you load your configuration on a new machine, you’ll need to run <code>M-x all-the-icons-install-fonts</code> so that mode line icons display correctly. (Fixed?)
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span style="color: #b22222;">;;;; </span><span style="color: #b22222;">Modeline ;;;;</span>
(<span style="color: #a020f0;">if</span> jmn-connected-beauty
    (<span style="color: #a020f0;">use-package</span> all-the-icons
      <span style="color: #483d8b;">:defer</span> 1
      <span style="color: #483d8b;">:init</span>
      (<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">and</span> (not (member <span style="color: #8b2252;">"all-the-icons"</span> (font-family-list))) <span style="color: #b22222;">;; </span><span style="color: #b22222;">autoinstall fonts</span>
                 (window-system))
        (all-the-icons-install-fonts t))))

(<span style="color: #a020f0;">use-package</span> doom-modeline
  <span style="color: #483d8b;">:init</span> (doom-modeline-mode 1)
  <span style="color: #483d8b;">:custom</span> ((doom-modeline-height 10)
           (doom-modeline-vcs-max-length 20))) <span style="color: #b22222;">;; </span><span style="color: #b22222;">default is 12</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org90e136e" class="outline-4">
<h4 id="org90e136e">Auto-clean white space</h4>
<div class="outline-text-4" id="text-org90e136e">
<p>
Archive: melpa
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;;; </span><span style="color: #b22222;">Cleanup whitespace only on lines I touched ;;;;</span>
(<span style="color: #a020f0;">use-package</span> ws-butler
    <span style="color: #483d8b;">:defer</span> 4
    <span style="color: #483d8b;">:hook</span> ((text-mode . ws-butler-mode)
           (prog-mode . ws-butler-mode)))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org01d286d" class="outline-3">
<h3 id="org01d286d">Keybindings</h3>
<div class="outline-text-3" id="text-org01d286d">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">general improvements</span>
(global-set-key (kbd <span style="color: #8b2252;">"&lt;escape&gt;"</span>) 'keyboard-escape-quit)
(global-set-key (kbd <span style="color: #8b2252;">"C-x C-b"</span>) 'buffer-menu)   <span style="color: #b22222;">;; </span><span style="color: #b22222;">open buffer menue in current buffer</span>
(global-set-key (kbd <span style="color: #8b2252;">"C-x C-k"</span>) 'kill-current-buffer)   <span style="color: #b22222;">;; </span><span style="color: #b22222;">"C-x k" asks which buffer</span>
(global-set-key (kbd <span style="color: #8b2252;">"C-o"</span>) 'other-window)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">default is "C-x o"</span>
(global-set-key (kbd <span style="color: #8b2252;">"M-o"</span>) 'previous-multiframe-window)
(global-set-key (kbd <span style="color: #8b2252;">"C-c C-c"</span>) 'eval-buffer)
(global-set-key (kbd <span style="color: #8b2252;">"C-c C-r"</span>) 'eval-region)

<span style="color: #b22222;">;; </span><span style="color: #b22222;">make font bigger/smaller.</span>
(global-set-key (kbd <span style="color: #8b2252;">"C-="</span>) 'text-scale-increase)
(global-set-key (kbd <span style="color: #8b2252;">"C--"</span>) 'text-scale-decrease)
(global-set-key (kbd <span style="color: #8b2252;">"C-0"</span>) 'text-scale-adjust)

<span style="color: #b22222;">;; </span><span style="color: #b22222;">f1 is a leader key for help</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">f2 is a leader key for 2 columns</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">f3 is kmacro-start-macro-or-insert-counter -- start recording a macro</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">f4 ends the macro recording</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">f5-f10 are clear by default</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">f11 is toggle full screen</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">f12 is clear by default</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">See recentfiles</span>
(global-set-key (kbd <span style="color: #8b2252;">"&lt;f5&gt;"</span>) 'recentf-open-files)

<span style="color: #b22222;">;; </span><span style="color: #b22222;">writing/editing</span>
(global-set-key (kbd <span style="color: #8b2252;">"&lt;f9&gt;"</span>) 'ispell-word)
(global-set-key (kbd <span style="color: #8b2252;">"&lt;f10&gt;"</span>) 'dictionary-lookup-definition)

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Buffer-menu-mode</span>
(define-key Buffer-menu-mode-map (kbd <span style="color: #8b2252;">"C-o"</span>) 'other-window)
(define-key Buffer-menu-mode-map (kbd <span style="color: #8b2252;">"M-o"</span>) 'previous-multiframe-window)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">"o" opens in another buffer and moves focus</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">"C-M-o" opens in another buffer and keeps focus in the Buffer-menu</span>
(define-key Buffer-menu-mode-map (kbd <span style="color: #8b2252;">"C-M-o"</span>) 'Buffer-menu-switch-other-window)

<span style="color: #b22222;">;; </span><span style="color: #b22222;">xref</span>
(<span style="color: #a020f0;">with-eval-after-load</span> 'xref
  (define-key xref--xref-buffer-mode-map (kbd <span style="color: #8b2252;">"C-o"</span>) 'other-window)
  (define-key xref--xref-buffer-mode-map (kbd <span style="color: #8b2252;">"o"</span>) 'xref-show-location-at-point))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">bookmark-bmenue</span>
(<span style="color: #a020f0;">with-eval-after-load</span> 'bookmark
  (define-key bookmark-bmenu-mode-map (kbd <span style="color: #8b2252;">"C-o"</span>) 'other-window)
  (define-key bookmark-bmenu-mode-map (kbd <span style="color: #8b2252;">"M-o"</span>) 'previous-multiframe-window)
  (define-key bookmark-bmenu-mode-map (kbd <span style="color: #8b2252;">"C-M-o"</span>) 'bookmark-bmenu-switch-other-window))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">compilation-modes</span>
(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-compilation-keybindings</span>()
  (define-key compilation-mode-map (kbd <span style="color: #8b2252;">"C-o"</span>) 'other-window)
  (define-key compilation-mode-map (kbd <span style="color: #8b2252;">"C-M-o"</span>) 'compilation-display-error))

(add-hook 'compilation-mode-hook 'jmn-compilation-keybindings)

<span style="color: #b22222;">;; </span><span style="color: #b22222;">grep-mode</span>
(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-grep-keybindings</span>()
  (define-key grep-mode-map (kbd <span style="color: #8b2252;">"o"</span>) 'compilation-display-error)
  (define-key grep-mode-map (kbd <span style="color: #8b2252;">"C-o"</span>) 'other-window))

(add-hook 'grep-mode-hook #'jmn-grep-keybindings)

<span style="color: #b22222;">;; </span><span style="color: #b22222;">adjust windows with keybindings</span>
(global-set-key (kbd <span style="color: #8b2252;">"C-&lt;up&gt;"</span>) 'enlarge-window)
(global-set-key (kbd <span style="color: #8b2252;">"C-&lt;down&gt;"</span>) 'shrink-window)
(global-set-key (kbd <span style="color: #8b2252;">"C-&lt;right&gt;"</span>) 'enlarge-window-horizontally)
(global-set-key (kbd <span style="color: #8b2252;">"C-&lt;left&gt;"</span>) 'shrink-window-horizontally)

<span style="color: #b22222;">;; </span><span style="color: #b22222;">non-org C-c &lt;blank&gt; bindings</span>
(global-set-key (kbd <span style="color: #8b2252;">"C-c r"</span>) 'revert-buffer)
(global-set-key (kbd <span style="color: #8b2252;">"C-c ="</span>) 'vc-diff) <span style="color: #b22222;">;; </span><span style="color: #b22222;">also bound to "C-x v ="</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7124d9a" class="outline-3">
<h3 id="org7124d9a">Dired</h3>
<div class="outline-text-3" id="text-org7124d9a">
<p>
More to do at <a href="https://youtu.be/PMWwM8QJAtU">here</a>: dired-open
</p>
<ul class="org-ul">
<li>"W" will open file in native environment (including another Emacs)</li>
<li>"(" toggle file info</li>
<li>M-x du  shows the size of the files in the buffer (toggle for human readable)</li>
</ul>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;;; </span><span style="color: #b22222;">Dired ;;;;</span>
(add-hook 'dired-mode-mode 'dired-hide-details-mode) <span style="color: #b22222;">;; </span><span style="color: #b22222;">hide default -- '(' to toggle</span>
(<span style="color: #a020f0;">with-eval-after-load</span> 'dired
  (<span style="color: #a020f0;">setq</span> dired-listing-switches <span style="color: #8b2252;">"-agho --group-directories-first"</span> )
  (<span style="color: #a020f0;">setq</span> find-ls-option '(<span style="color: #8b2252;">"-print0 | xargs -0 ls -agho"</span> . <span style="color: #8b2252;">""</span>))
  (<span style="color: #a020f0;">setq</span> dired-dwim-target t) <span style="color: #b22222;">;; </span><span style="color: #b22222;">guess other dired directory for copy and rename</span>
  (<span style="color: #a020f0;">setq</span> wdired-allow-to-change-permissions t)
  (define-key dired-mode-map (kbd <span style="color: #8b2252;">"C-o"</span>) 'other-window)
  (<span style="color: #a020f0;">setq</span> dired-guess-shell-alist-user '(
                                       (<span style="color: #8b2252;">"\\.png\\'"</span> <span style="color: #8b2252;">"shotwell"</span>)
                                       (<span style="color: #8b2252;">"\\.jpg\\'"</span> <span style="color: #8b2252;">"shotwell"</span>)
                                       (<span style="color: #8b2252;">"\\.jpeg\\'"</span> <span style="color: #8b2252;">"shotwell"</span>)
                                       (<span style="color: #8b2252;">"\\.mp4\\'"</span> <span style="color: #8b2252;">"vlc"</span>)
                                       (<span style="color: #8b2252;">"\\.avi\\'"</span> <span style="color: #8b2252;">"vlc"</span>)
                                       (<span style="color: #8b2252;">"\\.iso\\'"</span> <span style="color: #8b2252;">"vlc"</span>)
                                       (<span style="color: #8b2252;">"\\.webm\\'"</span> <span style="color: #8b2252;">"vlc"</span>)
                                       (<span style="color: #8b2252;">"\\.mkv\\'"</span> <span style="color: #8b2252;">"vlc"</span>)
                                       (<span style="color: #8b2252;">"\\.mp3\\'"</span> <span style="color: #8b2252;">"rhythmbox"</span>)
                                       (<span style="color: #8b2252;">"\\.html\\'"</span> <span style="color: #8b2252;">"firefox"</span>)
                                       (<span style="color: #8b2252;">"\\.epub\\'"</span> <span style="color: #8b2252;">"ebook-viewer"</span>)
                                       (<span style="color: #8b2252;">"\\.pdf\\'"</span> <span style="color: #8b2252;">"evince"</span>)
                                       (<span style="color: #8b2252;">"\\.ipynb\\'"</span> <span style="color: #8b2252;">"code"</span>))))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">sluggish mode which lists the recursive size of each folder/item in dired.</span>
(<span style="color: #a020f0;">use-package</span> dired-du
  <span style="color: #483d8b;">:commands</span> dired-du-mode
  <span style="color: #483d8b;">:defer</span> t
  <span style="color: #483d8b;">:config</span> (<span style="color: #a020f0;">setq</span> dired-du-size-format t))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">use a single dired session</span>
(<span style="color: #a020f0;">use-package</span> dired-single
  <span style="color: #483d8b;">:after</span> dired
  <span style="color: #483d8b;">:defer</span> t
  <span style="color: #483d8b;">:hook</span> (dired-mode .
                    (<span style="color: #a020f0;">lambda</span> () (define-key dired-mode-map [remap dired-find-file]
                                           'dired-single-buffer)
                      (define-key dired-mode-map
                                  [remap dired-mouse-find-file-other-window]
                                  'dired-single-buffer-mouse)
                      (define-key dired-mode-map [remap dired-up-directory]
                                  'dired-single-up-directory))))
(<span style="color: #a020f0;">if</span> jmn-connected-beauty
    (<span style="color: #a020f0;">use-package</span> all-the-icons-dired
      <span style="color: #483d8b;">:after</span> dired
      <span style="color: #483d8b;">:defer</span> t
      <span style="color: #483d8b;">:hook</span> (dired-mode . all-the-icons-dired-mode)))

</pre>
</div>
</div>
</div>

<div id="outline-container-org7b7626b" class="outline-3">
<h3 id="org7b7626b">Proced</h3>
<div class="outline-text-3" id="text-org7b7626b">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;;; </span><span style="color: #b22222;">Proced ;;;;</span>
(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">proced-settings</span> ()
    (proced-toggle-auto-update 5)) <span style="color: #b22222;">;; </span><span style="color: #b22222;">auto update every 4 seconds</span>

(add-hook 'proced-mode-hook 'proced-settings)
</pre>
</div>
</div>
</div>

<div id="outline-container-org950de88" class="outline-3">
<h3 id="org950de88">Native Compilation</h3>
<div class="outline-text-3" id="text-org950de88">
<p>
Suppress compilation warnings
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;;; </span><span style="color: #b22222;">Native comp ;;;;</span>
(<span style="color: #a020f0;">setq</span> native-comp-async-report-warnings-errors nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-org6e551dc" class="outline-3">
<h3 id="org6e551dc"><span class="todo TODO">TODO</span> Goto last change</h3>
<div class="outline-text-3" id="text-org6e551dc">
<p>
Check with other environments to settle on "C-;" or "M-;" &#x2013; the other us used for <code>evil-nerd comment</code>
</p>
<ul class="org-ul">
<li>we cleared "C-;" from Flyspell above</li>
</ul>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> goto-last-change
  <span style="color: #483d8b;">:ensure</span> t
  <span style="color: #483d8b;">:bind</span> (<span style="color: #8b2252;">"C-c g"</span> . goto-last-change))
</pre>
</div>
</div>
</div>

<div id="outline-container-org384508b" class="outline-3">
<h3 id="org384508b">Input Buffer, Directory Search</h3>
<div class="outline-text-3" id="text-org384508b">
</div>
<div id="outline-container-org621e659" class="outline-4">
<h4 id="org621e659">Ivy, Ivy-Rich, and Counsel</h4>
<div class="outline-text-4" id="text-org621e659">
<p>
Ivy displays vertical completions of input buffer.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> ivy
  <span style="color: #483d8b;">:after</span> counsel
  <span style="color: #483d8b;">:defer</span> t
  <span style="color: #483d8b;">:config</span>
  (ivy-mode 1)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">remove ^ on the inputbuffer</span>
  (<span style="color: #a020f0;">setq</span> ivy-initial-inputs-alist nil))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgba59beb" class="outline-4">
<h4 id="orgba59beb">Ivy-Rich</h4>
<div class="outline-text-4" id="text-orgba59beb">
<p>
Ivy-rich provides information to display in input buffer to counsel.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> ivy-rich
  <span style="color: #483d8b;">:after</span> counsel
  <span style="color: #483d8b;">:init</span>
  (ivy-rich-mode 1))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbe9bd47" class="outline-4">
<h4 id="orgbe9bd47">Ivy-prescient</h4>
<div class="outline-text-4" id="text-orgbe9bd47">
<p>
prescient.el provides some helpful behavior for sorting Ivy completion candidates based on how recently or frequently you select them. This can be especially helpful when using M-x to run commands that you don’t have bound to a key but still need to access occasionally.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> ivy-prescient
  <span style="color: #483d8b;">:after</span> counsel
  <span style="color: #483d8b;">:custom</span>
  (ivy-prescient-enable-filtering nil)
  <span style="color: #483d8b;">:config</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Uncomment the following line to have sorting remembered across sessions!</span>
  (prescient-persist-mode 1)
  (ivy-prescient-mode 1))
</pre>
</div>
</div>
</div>

<div id="outline-container-org5518d14" class="outline-4">
<h4 id="org5518d14">Counsel</h4>
<div class="outline-text-4" id="text-org5518d14">
<p>
Counsel displays ivy-rich info along with suggestions in input buffer.
</p>
<ul class="org-ul">
<li><code>M-o</code> allows access to help in input buffer.
Archive: elpa, melpa</li>
</ul>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> counsel
  <span style="color: #483d8b;">:defer</span> t
  <span style="color: #483d8b;">:bind</span> ((<span style="color: #8b2252;">"M-x"</span> . counsel-M-x)      <span style="color: #b22222;">; </span><span style="color: #b22222;">displays ivy-rich info in minibuffer</span>
         (<span style="color: #8b2252;">"C-x C-f"</span> . counsel-find-file)
         <span style="color: #483d8b;">:map</span> minibuffer-local-map
         (<span style="color: #8b2252;">"C-r"</span> . 'counsel-minibuffer-history)
         ))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb966046" class="outline-3">
<h3 id="orgb966046">Helpful and Which-key</h3>
<div class="outline-text-3" id="text-orgb966046">
</div>
<div id="outline-container-org06db446" class="outline-4">
<h4 id="org06db446">Helpful</h4>
<div class="outline-text-4" id="text-org06db446">
<p>
Better version of help. We remap normal help keys to Helpful's versions.
Archive: melpa
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> helpful
  <span style="color: #483d8b;">:defer</span> 3
  <span style="color: #483d8b;">:commands</span> (helpful-callable helpful-variavle helpful-command helpful-key)
  <span style="color: #483d8b;">:custom</span>
  (counsel-describe-function-function #'helpful-callable)
  (counsel-describe-variable-function #'helpful-variable)
  <span style="color: #483d8b;">:bind</span>
  ([remap describe-function] . counsel-describe-function)
  ([remap describe-command] . helpful-command)
  ([remap describe-variable] . counsel-describe-variable)
  ([remap describe-key] . helpful-key))
</pre>
</div>
</div>
</div>

<div id="outline-container-org26c8ffe" class="outline-4">
<h4 id="org26c8ffe">Which-key</h4>
<div class="outline-text-4" id="text-org26c8ffe">
<p>
Archive: elpa, melpa
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> which-key
  <span style="color: #483d8b;">:defer</span> 1
  <span style="color: #483d8b;">:config</span>(which-key-mode)
  (<span style="color: #a020f0;">setq</span> which-key-idle-delay 0.8))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb2089ee" class="outline-3">
<h3 id="orgb2089ee">Font size</h3>
<div class="outline-text-3" id="text-orgb2089ee">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-set-font-height</span>(value)
  (<span style="color: #a020f0;">interactive</span> <span style="color: #8b2252;">"nFont height (default is 100): "</span>)
  (set-face-attribute  'default nil <span style="color: #483d8b;">:height</span> value))

(jmn-set-font-height (alist-get (system-name) jmn-font-height-alist
                                100 nil 'string=)) <span style="color: #b22222;">;; </span><span style="color: #b22222;">default is 100</span>

(<span style="color: #a020f0;">setq</span> text-scale-mode-step 1.05)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb3f9a6e" class="outline-3">
<h3 id="orgb3f9a6e">General Helper Function</h3>
<div class="outline-text-3" id="text-orgb3f9a6e">
</div>
<div id="outline-container-orgd15e3f3" class="outline-4">
<h4 id="orgd15e3f3">jmn-load-init</h4>
<div class="outline-text-4" id="text-orgd15e3f3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-load-init</span> ()
  (<span style="color: #a020f0;">interactive</span>)
  (load <span style="color: #8b2252;">"~/.emacs.d/init.el"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org4e5bdeb" class="outline-4">
<h4 id="org4e5bdeb">jmn-vscode-current-buffer-file-at-point</h4>
<div class="outline-text-4" id="text-org4e5bdeb">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-vscode-current-buffer-file-at-point</span> ()
  (<span style="color: #a020f0;">interactive</span>)
  (start-process-shell-command <span style="color: #8b2252;">"code"</span>
                               nil
                               (concat <span style="color: #8b2252;">"code --goto "</span>
                                       (buffer-file-name)
                                       <span style="color: #8b2252;">":"</span>
                                       (number-to-string (line-number-at-pos))
                                       <span style="color: #8b2252;">":"</span>
                                       <span style="color: #b22222;">;; </span><span style="color: #b22222;">+1 who knows why</span>
                                       (number-to-string (+ 1 (current-column))))))

(define-key global-map (kbd <span style="color: #8b2252;">"&lt;f12&gt;"</span>)
            'jmn-vscode-current-buffer-file-at-point)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc0306fd" class="outline-4">
<h4 id="orgc0306fd">jmn-remove-M-1-9-from-mode-map</h4>
<div class="outline-text-4" id="text-orgc0306fd">
<p>
Clear up to allow the tab-bar keybindings.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-remove-M-1-9-from-mode-map</span> (modemap)
  <span style="color: #8b2252;">"remove 'M-[d]' keybinding from a mode-map"</span>
  (<span style="color: #a020f0;">dolist</span> (num '(<span style="color: #8b2252;">"1"</span> <span style="color: #8b2252;">"2"</span> <span style="color: #8b2252;">"3"</span> <span style="color: #8b2252;">"4"</span> <span style="color: #8b2252;">"5"</span> <span style="color: #8b2252;">"6"</span> <span style="color: #8b2252;">"7"</span> <span style="color: #8b2252;">"8"</span> <span style="color: #8b2252;">"9"</span>))
    (define-key modemap (kbd (concat <span style="color: #8b2252;">"M-"</span> num)) nil)))
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org03d49d5" class="outline-2">
<h2 id="org03d49d5">General Development</h2>
<div class="outline-text-2" id="text-org03d49d5">
</div>
<div id="outline-container-orgd440653" class="outline-3">
<h3 id="orgd440653">Indentation</h3>
<div class="outline-text-3" id="text-orgd440653">
<p>
Guess the indentation offset and 'indent-tabs-mode' from the file using internal heuristics.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> dtrt-indent
  <span style="color: #483d8b;">:hook</span> (prog-mode . (<span style="color: #a020f0;">lambda</span> () (dtrt-indent-mode 1))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org436a5e0" class="outline-3">
<h3 id="org436a5e0">Prog-mode</h3>
<div class="outline-text-3" id="text-org436a5e0">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;</span><span style="color: #b22222;">Prog-mode</span>
(add-hook 'prog-mode-hook 'display-line-numbers-mode)
(add-hook 'prog-mode-hook 'visual-line-mode)
(add-hook 'prog-mode-hook 'hs-minor-mode) <span style="color: #b22222;">;; </span><span style="color: #b22222;">hide show, use C-c @ prefix</span>
(<span style="color: #a020f0;">unless</span> (eq system-type 'windows-nt)
    (add-hook 'prog-mode-hook 'flyspell-prog-mode)) <span style="color: #b22222;">;; </span><span style="color: #b22222;">flyspell-comments</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org65be41b" class="outline-3">
<h3 id="org65be41b">Parens/delimiters</h3>
<div class="outline-text-3" id="text-org65be41b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(show-paren-mode    1) <span style="color: #b22222;">; </span><span style="color: #b22222;">Highlight parentheses pairs.</span>
</pre>
</div>
</div>

<div id="outline-container-org9550297" class="outline-4">
<h4 id="org9550297"><span class="todo TODO">TODO</span> Rainbow Delimiters</h4>
<div class="outline-text-4" id="text-org9550297">
<p>
Need to test the org-mode hook
Archive: melpa
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> rainbow-delimiters
  <span style="color: #483d8b;">:defer</span> t
  <span style="color: #483d8b;">:hook</span> ((prog-mode . rainbow-delimiters-mode)
    (org-mode . (<span style="color: #a020f0;">lambda</span> () (rainbow-delimiters-mode 0))))
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-org093755c" class="outline-4">
<h4 id="org093755c">Smartparens</h4>
<div class="outline-text-4" id="text-org093755c">
<p>
Auto-creates closing parenthesis and bar and, smartly, writes it over if it is typed.
Archive: melpa
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> smartparens
  <span style="color: #483d8b;">:hook</span> (prog-mode . smartparens-mode))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8201176" class="outline-3">
<h3 id="org8201176">Magit</h3>
<div class="outline-text-3" id="text-org8201176">
<p>
<a href="https://magit.vc/">Magit Documentation</a> Archive: melpa
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> magit
  <span style="color: #483d8b;">:commands</span> (magit-status))
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">:custom</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">(magit-display-buffer-function</span>
  <span style="color: #b22222;">;;    </span><span style="color: #b22222;">#'magit-display-buffer-same-window-except-diff-v1));;display status buffer</span>


<span style="color: #b22222;">;; </span><span style="color: #b22222;">moved here incase magit installed on a pure machine ;; replace original keybinding?</span>
(<span style="color: #a020f0;">with-eval-after-load</span> 'magit
  (add-hook 'magit-status-mode-hook
            (<span style="color: #a020f0;">lambda</span> () (define-key magit-mode-map (kbd <span style="color: #8b2252;">"C-&lt;tab&gt;"</span>) nil)))
  (jmn-remove-M-1-9-from-mode-map magit-mode-map))
</pre>
</div>
</div>
</div>

<div id="outline-container-org9988998" class="outline-3">
<h3 id="org9988998">Git-Gutter</h3>
<div class="outline-text-3" id="text-org9988998">
<p>
Git-gutter-fringe displays git-gutter in the fringe
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> git-gutter
  <span style="color: #483d8b;">:hook</span> ((prog-mode . git-gutter-mode)
         (org-mode . git-gutter-mode)
         (text-mode . git-gutter-mode))
  <span style="color: #483d8b;">:config</span> (<span style="color: #a020f0;">setq</span> git-gutter:update-interval 0.02))

(<span style="color: #a020f0;">use-package</span> git-gutter-fringe
  <span style="color: #483d8b;">:after</span> git-gutter
  <span style="color: #483d8b;">:config</span>
  (set-face-background 'git-gutter-fr:deleted  (face-background 'default))
  (set-face-foreground 'git-gutter-fr:deleted  <span style="color: #8b2252;">"red"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb0751a3" class="outline-3">
<h3 id="orgb0751a3">Highlight-indent-guide</h3>
<div class="outline-text-3" id="text-orgb0751a3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> highlight-indent-guides
  <span style="color: #483d8b;">:defer</span> 2
  <span style="color: #483d8b;">:hook</span> prog-mode
  <span style="color: #483d8b;">:config</span>
  (<span style="color: #a020f0;">setq</span> highlight-indent-guides-method 'fill)
  (<span style="color: #a020f0;">setq</span> highlight-indent-guides-auto-odd-face-perc -7)
  (<span style="color: #a020f0;">setq</span> highlight-indent-guides-auto-even-face-perc 7))
</pre>
</div>
</div>
</div>

<div id="outline-container-orge7cce96" class="outline-3">
<h3 id="orge7cce96">Company-Mode</h3>
<div class="outline-text-3" id="text-orge7cce96">
<p>
Currently <code>company-mode</code> gets called by <code>lsp-mode</code> by default, providing the auto-complete box that <code>lsp</code> presents it's suggestions in.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> company
  <span style="color: #483d8b;">:ensure</span> t
  <span style="color: #483d8b;">:hook</span> (eglot-managed-mode . company-mode)
  <span style="color: #483d8b;">:custom</span>
  (company-minimum-prefix-length 1)
  (company-idle-delay 0.5))
</pre>
</div>
</div>

<div id="outline-container-org76f2eaa" class="outline-4">
<h4 id="org76f2eaa">company-box-mode</h4>
<div class="outline-text-4" id="text-org76f2eaa">
<p>
Brings up a another box with information about the highlighted recommended item in the company/lsp box.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> company-box
  <span style="color: #483d8b;">:after</span> company
  <span style="color: #483d8b;">:hook</span> (company-mode . company-box-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org115a4bb" class="outline-4">
<h4 id="org115a4bb">company-prescient</h4>
<div class="outline-text-4" id="text-org115a4bb">
<p>
Help in sorting the completion results.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> company-prescient
  <span style="color: #483d8b;">:after</span> company
  <span style="color: #483d8b;">:config</span>
  (company-prescient-mode +1))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org60650d6" class="outline-3">
<h3 id="org60650d6">Treemacs</h3>
<div class="outline-text-3" id="text-org60650d6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> treemacs
  <span style="color: #483d8b;">:ensure</span> t
  <span style="color: #483d8b;">:defer</span> t
  <span style="color: #483d8b;">:bind</span> ((<span style="color: #8b2252;">"C-c t"</span> . treemacs ))
  <span style="color: #483d8b;">:config</span>
  (<span style="color: #a020f0;">setq</span> treemacs-width 30))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd1b4b7d" class="outline-3">
<h3 id="orgd1b4b7d">Eglot</h3>
<div class="outline-text-3" id="text-orgd1b4b7d">
<p>
Combines with flymake, eldoc, company-mode, and xref to make an IDE experience.
</p>
<ul class="org-ul">
<li>can search in a company completion box!</li>
<li>Flymake
shows underlines: errors in red, warnings in blue</li>

<li>"C-h ." provides eldoc info at the point</li>
</ul>
<p>
Function/keybinding learning area:
</p>
<ul class="org-ul">
<li>eglot
<ul class="org-ul">
<li>eglot find declaration</li>
<li>eglot find definition</li>
<li>eglot format buffer or region</li>
<li>eglot rename</li>
</ul></li>

<li>xref (uses eglot for the backend)
<ul class="org-ul">
<li>xrf-find-defintions "M-." &#x2013;return back with "M-,"
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> uses tags so replace?</li>
</ul></li>
<li>xrf-find-references "M-?"</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> eglot
  <span style="color: #483d8b;">:defer</span> 1
  <span style="color: #483d8b;">:ensure-system-package</span>
  ((bash-language-server . <span style="color: #8b2252;">"sudo dnf install -y nodejs-bash-language-server"</span>)
   (pyright . <span style="color: #8b2252;">"pip install pyright"</span>)
   (clangd . <span style="color: #8b2252;">"sudo dnf install -y clang-tools-extra"</span>))
  <span style="color: #483d8b;">:hook</span> ((sh-mode . eglot-ensure)
         (python-mode . eglot-ensure)
         (c-mode . eglot-ensure)
         (c++-mode . eglot-ensure))
  <span style="color: #483d8b;">:config</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">make shorter ones later?</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">use "M-." for xref-find-definitions</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">use "M-?" for xref-find-references</span>
  <span style="color: #b22222;">;;; </span><span style="color: #b22222;">use "M-g n" and "M-g p" to go to next and previous location</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">use ... for xref-pop-marker-stack</span>
  (define-prefix-command 'eglot-prefix)
  (global-set-key (kbd <span style="color: #8b2252;">"C-x e"</span>) 'eglot-prefix)
  (define-key eglot-prefix (kbd <span style="color: #8b2252;">"r"</span>) 'eglot-rename)
  (define-key eglot-prefix (kbd <span style="color: #8b2252;">"o"</span>) 'eglot-code-action-organize-imports)
  (define-key eglot-prefix (kbd <span style="color: #8b2252;">"h"</span>) 'eldoc)
  (define-key eglot-prefix (kbd <span style="color: #8b2252;">"d"</span>) 'eglot-find-declaration)
  (define-key eglot-prefix (kbd <span style="color: #8b2252;">"a"</span>) 'eglot-format-buffer)
  (define-key eglot-prefix (kbd <span style="color: #8b2252;">"n"</span>) 'flymake-goto-next-error)
  (define-key eglot-prefix (kbd <span style="color: #8b2252;">"p"</span>) 'flymake-goto-prev-error)
  (define-key eglot-prefix (kbd <span style="color: #8b2252;">"b"</span>) 'flymake-show-buffer-diagnostics)
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-orga8787fa" class="outline-3">
<h3 id="orga8787fa">CMake</h3>
<div class="outline-text-3" id="text-orga8787fa">
<p>
Lsp-mode requires the language server on the system:
<code>pip install cmake-language-server</code>.
</p>
</div>
<div id="outline-container-org1f86e8c" class="outline-4">
<h4 id="org1f86e8c">CMake-mode</h4>
<div class="outline-text-4" id="text-org1f86e8c">
<p>
Archive: melpa
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> cmake-mode
  <span style="color: #483d8b;">:defer</span> t
  <span style="color: #483d8b;">:ensure-system-package</span> ((cmake . <span style="color: #8b2252;">"sudo dnf install -y cmake"</span>))
  <span style="color: #483d8b;">:mode</span> (<span style="color: #8b2252;">"CMakeLists\\.txt\\'"</span> <span style="color: #8b2252;">"\\.cmake\\'"</span>))

(<span style="color: #a020f0;">use-package</span> cmake-font-lock
  <span style="color: #483d8b;">:ensure</span> t
  <span style="color: #483d8b;">:after</span> cmake-mode
  <span style="color: #483d8b;">:config</span> (cmake-font-lock-activate))
</pre>
</div>
</div>
</div>

<div id="outline-container-org94787eb" class="outline-4">
<h4 id="org94787eb"><span class="todo TODO">TODO</span> CMake project</h4>
<div class="outline-text-4" id="text-org94787eb">
<p>
In the source directory containing <code>CMakeLists.txt</code> run <code>M-x cmake-project-configure-project</code>.
As a preference, use the <code>/bin/</code> option to keep the cmake files out of the source directory.
After this, the <code>compile</code> automatically holds the correct command.
Archive: melpa
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> cmake-project
  <span style="color: #483d8b;">:defer</span> 2
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">:hook ((c++-mode . cmake-project-mode )</span>
  <span style="color: #b22222;">;;        </span><span style="color: #b22222;">(c-mode . cmake-project-mode))</span>
  )
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgad0b100" class="outline-3">
<h3 id="orgad0b100">Yasnippet</h3>
<div class="outline-text-3" id="text-orgad0b100">
<p>
Archive: elpa, melpa
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> yasnippet
  <span style="color: #483d8b;">:defer</span> 1
  <span style="color: #483d8b;">:config</span>
  (yas-global-mode 1))

  (<span style="color: #a020f0;">use-package</span> yasnippet-snippets
    <span style="color: #483d8b;">:after</span> yas-minor-mode) <span style="color: #b22222;">; </span><span style="color: #b22222;">load basic snippets from melpa</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7dc5729" class="outline-3">
<h3 id="org7dc5729"><span class="todo TODO">TODO</span> Flyspell</h3>
<div class="outline-text-3" id="text-org7dc5729">
<p>
<code>C-,</code>    flyspell-goto-next-error
<code>C-.</code>    flyspell-auto-correct-word
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">free up C-; for goto-last change</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(with-eval-after-load 'flyspell</span>
<span style="color: #b22222;">;;     </span><span style="color: #b22222;">(define-key flyspell-mode-map (kbd "C-;") nil))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgce74928" class="outline-3">
<h3 id="orgce74928"><span class="todo TODO">TODO</span> Evil nerd commenter</h3>
<div class="outline-text-3" id="text-orgce74928">
<p>
Archive: melpa
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> evil-nerd-commenter
<span style="color: #483d8b;">:bind</span> (<span style="color: #8b2252;">"M-;"</span>. evilnc-comment-or-uncomment-lines))
</pre>
</div>
</div>
</div>

<div id="outline-container-org606e1c2" class="outline-3">
<h3 id="org606e1c2">Tree Sitter Highlighting</h3>
<div class="outline-text-3" id="text-org606e1c2">
<p>
Archive: melpa
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> tree-sitter-langs
  <span style="color: #483d8b;">:hook</span> ((sh-mode . tree-sitter-hl-mode)
         (python-mode . tree-sitter-hl-mode)
         (c-mode . tree-sitter-hl-mode)
         (c++-mode . tree-sitter-hl-mode)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org822f641" class="outline-3">
<h3 id="org822f641">Ripgrep</h3>
<div class="outline-text-3" id="text-org822f641">
<p>
Archive: melpa
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> ripgrep
  <span style="color: #483d8b;">:defer</span> 2
  <span style="color: #483d8b;">:ensure-system-package</span>
  ((rg . <span style="color: #8b2252;">"sudo dnf install -y ripgrep"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org31ce83f" class="outline-3">
<h3 id="org31ce83f">YAML</h3>
<div class="outline-text-3" id="text-org31ce83f">
<p>
Archive: melpa
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> yaml-mode
  <span style="color: #483d8b;">:defer</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeb2f813" class="outline-3">
<h3 id="orgeb2f813">Docker</h3>
<div class="outline-text-3" id="text-orgeb2f813">
<p>
Archive: melpa
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> dockerfile-mode
  <span style="color: #483d8b;">:defer</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org82e5a6f" class="outline-3">
<h3 id="org82e5a6f"><span class="todo TODO">TODO</span> Compilation mode in async output</h3>
<div class="outline-text-3" id="text-org82e5a6f">
<p>
Note: not used or tangled
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defadvice</span> <span style="color: #0000ff;">compile</span> (before ad-compile-smart activate)
  <span style="color: #8b2252;">"Advises `</span><span style="color: #008b8b;">compile</span><span style="color: #8b2252;">' so it sets the argument COMINT to t."</span>
  (ad-set-arg 1 t))

(add-hook 'shell-mode-hook 'compilation-shell-minor-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-org9ff8bff" class="outline-3">
<h3 id="org9ff8bff">Devdocs</h3>
<div class="outline-text-3" id="text-org9ff8bff">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> devdocs
 <span style="color: #483d8b;">:defer</span> 2
 <span style="color: #483d8b;">:bind</span>  (<span style="color: #8b2252;">"C-h D"</span> . 'devdocs-lookup))
</pre>
</div>
</div>
</div>
<div id="outline-container-org936995b" class="outline-3">
<h3 id="org936995b">Pure Dev Tools</h3>
<div class="outline-text-3" id="text-org936995b">
</div>
<div id="outline-container-orge75b0fc" class="outline-4">
<h4 id="orge75b0fc">smerge</h4>
<div class="outline-text-4" id="text-orge75b0fc">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-smerge-accept-all-lower</span>()
  <span style="color: #8b2252;">"Accept all lower changes below the cursor point"</span>
  (<span style="color: #a020f0;">interactive</span>)
  (<span style="color: #a020f0;">while</span> (not (smerge-next))
    (smerge-keep-lower)))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-smerge-accept-all-upper</span>()
  <span style="color: #8b2252;">"Accept all upper changes below the cursor point"</span>
  (<span style="color: #a020f0;">interactive</span>)
  (<span style="color: #a020f0;">while</span> (not (smerge-next))
    (smerge-keep-upper)))

(<span style="color: #a020f0;">with-eval-after-load</span> 'smerge
  (define-key smerge-mode-map (kbd <span style="color: #8b2252;">"C-c ^ L"</span>) 'jmn-smerge-accept-all-lower)
  (define-key smerge-mode-map (kbd <span style="color: #8b2252;">"C-c ^ U"</span>) 'jmn-smerge-accept-all-upper))
</pre>
</div>
</div>
</div>

<div id="outline-container-org932b7e7" class="outline-4">
<h4 id="org932b7e7">Tab completion</h4>
<div class="outline-text-4" id="text-org932b7e7">
<p>
Gives of tab completion in:
</p>
<ul class="org-ul">
<li class="on"><code>[X]</code> python-mode</li>
<li class="on"><code>[X]</code> emacs-lisp-mode</li>
<li class="on"><code>[X]</code> shell-script mode (bash)</li>
</ul>

<p>
With this setup, TAB - which is usually bound to indent-for-tab-command - first tries to adjust the indentation according to the mode's settings, but if the indentation is already correct, completion is triggered. This is usually the desired behavior, and IMHO works better than third-party plugins like smart-tab. <a href="https://stackoverflow.com/questions/7022898/emacs-autocompletion-in-emacs-lisp-mode">reference</a>
</p>

<p>
<span class="underline">I believe this is replacing what company-mode does for us.</span>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-tab-complete-mode</span> ()
  <span style="color: #8b2252;">"My tab complete config"</span>
  (<span style="color: #a020f0;">setq</span> tab-always-indent 'complete) <span style="color: #b22222;">;;</span><span style="color: #b22222;">complete if indented</span>
  (add-to-list 'completion-styles 'initials t))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">turning it on everywhere and only turning company mode on for prog-mode</span>
<span style="color: #b22222;">;;;; </span><span style="color: #b22222;">if this stayes it will just be moved up to under the 'General Emacs'</span>
(jmn-tab-complete-mode)
</pre>
</div>

<p>
As of 28.1 there is <code>tab-first-completion</code>. Could add a setup for it above which depends on Emacs version.
</p>
</div>
</div>
<div id="outline-container-org731b1e7" class="outline-4">
<h4 id="org731b1e7">vc-mode</h4>
<div class="outline-text-4" id="text-org731b1e7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">if</span> jmn-pure
    (global-set-key (kbd <span style="color: #8b2252;">"C-c g"</span>) (<span style="color: #a020f0;">lambda</span> () (<span style="color: #a020f0;">interactive</span>)
                                    (vc-dir (file-name-directory (buffer-file-name))))))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-vc-commit</span> ()
    <span style="color: #8b2252;">"My command to show the vc-diff along with the commit input"</span>
    (<span style="color: #a020f0;">interactive</span>)
    (vc-next-action (buffer-file-name))
    (previous-multiframe-window)
    (vc-diff)
    (previous-multiframe-window)
    (switch-to-buffer<span style="color: #8b2252;">"*vc-log*"</span>)
    <span style="color: #b22222;">;; </span><span style="color: #b22222;">(set-window-text-height (selected-window) 4)</span>
    <span style="color: #b22222;">;; </span><span style="color: #b22222;">(kill-buffer "*log-edit-files*")</span>
    )

(<span style="color: #a020f0;">with-eval-after-load</span> 'vc-dir
  (define-key vc-dir-mode-map (kbd <span style="color: #8b2252;">"C-o"</span>) 'other-window)
  (define-key vc-dir-mode-map (kbd <span style="color: #8b2252;">"C-M-o"</span>) 'vc-dir-display-file)
  (define-key vc-dir-mode-map (kbd <span style="color: #8b2252;">"c"</span>) 'jmn-vc-commit))
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org7632c3b" class="outline-2">
<h2 id="org7632c3b">Languages</h2>
<div class="outline-text-2" id="text-org7632c3b">
</div>
<div id="outline-container-org8f2569d" class="outline-3">
<h3 id="org8f2569d">Emacs-lisp</h3>
<div class="outline-text-3" id="text-org8f2569d">
<p>
Use <code>C-c '</code> to view elisp babel blocks in their own file to get completion in company-mode.
</p>
<ul class="org-ul">
<li>added flycheck-mode-hook in it's use-package config.</li>
</ul>
</div>
</div>

<div id="outline-container-org97cc13e" class="outline-3">
<h3 id="org97cc13e">Bash</h3>
<div class="outline-text-3" id="text-org97cc13e">
<ul class="org-ul">
<li>debuggers are available</li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-sh-mode-hook-fn</span>()
  (<span style="color: #a020f0;">setq</span> sh-basic-offset 2
        sh-indentation 2)) <span style="color: #b22222;">;; </span><span style="color: #b22222;">defaults is 4</span>
(add-hook 'sh-mode-hook #'my-sh-mode-hook-fn)

(<span style="color: #a020f0;">use-package</span> sh-script
  <span style="color: #483d8b;">:defer</span> t
  <span style="color: #483d8b;">:config</span>
  (<span style="color: #a020f0;">setq</span> sh-basic-offset 2
        sh-indentation 2)) <span style="color: #b22222;">;; </span><span style="color: #b22222;">defaults are 4</span>
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="org3aff995"></a><span class="todo HOLD">HOLD</span> May need to attach shellcheck with flymake<br />
<div class="outline-text-5" id="text-org3aff995">
<p>
See <a href="https://amitp.blogspot.com/2023/10/emacs-and-shellcheck.html">https://amitp.blogspot.com/2023/10/emacs-and-shellcheck.html</a>
</p>
</div>
</li>
</ul>
</div>

<div id="outline-container-org304bbdd" class="outline-3">
<h3 id="org304bbdd">Python</h3>
<div class="outline-text-3" id="text-org304bbdd">
</div>
<div id="outline-container-orgf040c08" class="outline-4">
<h4 id="orgf040c08"><span class="todo TODO">TODO</span> Jupyter Notebooks</h4>
<div class="outline-text-4" id="text-orgf040c08">
</div>
<ul class="org-ul">
<li><a id="orgcc8ad0b"></a><span class="todo TODO">TODO</span> run Jupyter in babel<br />
<div class="outline-text-5" id="text-orgcc8ad0b">
<p>
<a href="https://sqrtminusone.xyz/posts/2021-05-01-org-python/">Reference</a> and <a href="https://github.com/jkitchin/scimax">https://github.com/jkitchin/scimax</a>
Cannot get zmq (Jupyter dependency)  to work currently
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> jupyter
    <span style="color: #483d8b;">:after</span> (org))

(org-babel-do-load-languages 'org-babel-load-languages
                             (append org-babel-load-languages
                                     '((jupyter . t))))
</pre>
</div>
</div>
</li>

<li><a id="orgf5c3fde"></a><span class="todo TODO">TODO</span> open notebook in Emacs<br />
<div class="outline-text-5" id="text-orgf5c3fde">
<p>
If I use EIN, add the setting for displaying the figures inline.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> ein
  <span style="color: #483d8b;">:commands</span> (ein:notebooklist-open)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">:config</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">(require 'ein-loaddefs)</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">(require 'ein)</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">(define-key ein:notebook-mode-map (kbd "&lt;C-tab&gt;") 'my-function)</span>
  )
</pre>
</div>
</div>
</li>

<li><a id="org2934d99"></a><span class="todo TODO">TODO</span> completion<br />
<div class="outline-text-5" id="text-org2934d99">
<p>
In <a href="https://www.youtube.com/watch?v=OB9vFu9Za8w">EIN video</a>, Miller says that the completion is based on <code>auto-complete</code> rather than <code>company</code>. So here we are going to try to get completion setup for <code>EIN</code>.
Also, in <a href="https://github.com/millejoh/emacs-ipython-notebook#ob-ein">EIN github</a>, Miller says that <code>EIN</code> is an <code>elpy</code> module, so maybe we need <code>elpy</code> for completion?
</p>
</div>
</li>
</ul>
</div>

<div id="outline-container-orgf7e26c8" class="outline-4">
<h4 id="orgf7e26c8">Pyvenv</h4>
<div class="outline-text-4" id="text-orgf7e26c8">
<p>
Archive: melpa
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> pyvenv
<span style="color: #483d8b;">:ensure</span> t
<span style="color: #483d8b;">:defer</span> t
<span style="color: #483d8b;">:diminish</span>
<span style="color: #483d8b;">:config</span>

(setenv <span style="color: #8b2252;">"WORKON_HOME"</span> <span style="color: #8b2252;">"/home/ape/.conda/envs"</span>)
        <span style="color: #b22222;">; </span><span style="color: #b22222;">Show python venv name in modeline</span>
        (<span style="color: #a020f0;">setq</span> pyvenv-mode-line-indicator
              '(pyvenv-virtual-env-name (<span style="color: #8b2252;">"[venv:"</span> pyvenv-virtual-env-name <span style="color: #8b2252;">"] "</span>)))
        (pyvenv-mode t))
</pre>
</div>

<p>
After package installation, you should have <code>M-x pyvenv-workon</code> command with a list of your virtual environments.
</p>

<p>
The only lack of this is that you need to restart LSP workspace at least once when you change venv by pyvenv-workon command.
</p>

<p>
So the flow should be like this:
</p>

<p>
<code>M-x pyvenv-workon &lt;your-venv&gt;</code>  # or conda environment?
<code>M-x lsp-restart-workspace</code> # eglot's corresponding command?
</p>

<p>
After changing venv all installed packages from venv should be visible for LSP server.
</p>
</div>
</div>

<div id="outline-container-org7a67610" class="outline-4">
<h4 id="org7a67610">Python-mode</h4>
<div class="outline-text-4" id="text-org7a67610">
<p>
For lsp, have pyright installed <code>pip install pyright</code>
</p>
</div>
<ul class="org-ul">
<li><a id="org33d2cc0"></a>python-mode<br />
<div class="outline-text-5" id="text-org33d2cc0">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;;; </span><span style="color: #b22222;">Python-mode ;;;;</span>
(<span style="color: #a020f0;">with-eval-after-load</span> 'python
  (<span style="color: #a020f0;">setq</span> python-shell-completion-native-enable 1)
  (define-key python-mode-map (kbd <span style="color: #8b2252;">"C-RET"</span>) 'python-shell-send-statement)
  (<span style="color: #a020f0;">if</span> (executable-find <span style="color: #8b2252;">"ipython"</span>)
      (<span style="color: #a020f0;">progn</span> (<span style="color: #a020f0;">setq</span> python-shell-interpreter <span style="color: #8b2252;">"ipython"</span>)
             (<span style="color: #a020f0;">setq</span> python-shell-interpreter-args <span style="color: #8b2252;">"-i --simple-prompt"</span>))))
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-org0535c81" class="outline-4">
<h4 id="org0535c81">Hook</h4>
<div class="outline-text-4" id="text-org0535c81">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-python-mode-hook-fn</span> ()
  (<span style="color: #a020f0;">with-eval-after-load</span> 'devdocs
    (<span style="color: #a020f0;">setq-local</span> devdocs-current-docs '(<span style="color: #8b2252;">"python~3.12"</span>))))


(add-hook 'python-mode-hook #'my-python-mode-hook-fn)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgfcd4df6" class="outline-3">
<h3 id="orgfcd4df6">C/C++</h3>
<div class="outline-text-3" id="text-orgfcd4df6">
</div>
<div id="outline-container-orgcc39379" class="outline-4">
<h4 id="orgcc39379">Compilation Buffer</h4>
<div class="outline-text-4" id="text-orgcc39379">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">setq</span> compilation-scroll-output t) <span style="color: #b22222;">;;</span><span style="color: #b22222;">*Compilation* buffer scroll with the output.</span>
</pre>
</div>

<p>
The following keeps the compilation buffer if there are warnings or errors, and buries it otherwise (after 1 second). <a href="https://stackoverflow.com/questions/11043004/emacs-compile-buffer-auto-close">source</a>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">bury-compile-buffer-if-successful</span> (buffer string)
 <span style="color: #8b2252;">"Bury a compilation buffer if succeeded without warnings "</span>
 (<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">and</span>
         (buffer-live-p buffer)
         (string-match <span style="color: #8b2252;">"compilation"</span> (buffer-name buffer))
         (string-match <span style="color: #8b2252;">"finished"</span> string)
         (not
          (<span style="color: #a020f0;">with-current-buffer</span> buffer
            (goto-char (point-min))
            (search-forward <span style="color: #8b2252;">"warning"</span> nil t))))
    (run-with-timer 1 nil
                    (<span style="color: #a020f0;">lambda</span> (buf)
                      (bury-buffer buf)
                      (switch-to-prev-buffer (get-buffer-window buf) 'kill))
                    buffer)))
(add-hook 'compilation-finish-functions 'bury-compile-buffer-if-successful)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb8c6968" class="outline-4">
<h4 id="orgb8c6968">Hook</h4>
<div class="outline-text-4" id="text-orgb8c6968">
<p>
Currently lsp-mode works with clangd backend without any initial setup.
company-clang needs <code>clang</code> installed on the system.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">setq-default</span> c-basic-offset 2)

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-c++-mode-hook-fn</span> ()
  (<span style="color: #a020f0;">with-eval-after-load</span> 'devdocs
    (<span style="color: #a020f0;">setq-local</span> devdocs-current-docs '(<span style="color: #8b2252;">"cpp"</span>))))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-c-mode-hook-fn</span> ()
  (<span style="color: #a020f0;">with-eval-after-load</span> 'devdocs
    (<span style="color: #a020f0;">setq-local</span> devdocs-current-docs '(<span style="color: #8b2252;">"c"</span>))))

(add-hook #'c-mode-hook #'my-c-mode-hook-fn)
(add-hook #'c++-mode-hook #'my-c++-mode-hook-fn)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org23f93f5" class="outline-3">
<h3 id="org23f93f5">Octave</h3>
<div class="outline-text-3" id="text-org23f93f5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'auto-mode-alist '(<span style="color: #8b2252;">"\\.m$"</span> . octave-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org04a3205" class="outline-3">
<h3 id="org04a3205">Markdown</h3>
<div class="outline-text-3" id="text-org04a3205">
<p>
Use <code>markdown-preview-mode</code> to view in browser.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"> (<span style="color: #a020f0;">use-package</span> markdown-mode
   <span style="color: #483d8b;">:defer</span> t
   <span style="color: #483d8b;">:hook</span> (markdown-mode-hook . (<span style="color: #a020f0;">lambda</span> ()
                                 (flyspell-mode))))

(<span style="color: #a020f0;">use-package</span>  markdown-preview-mode
  <span style="color: #483d8b;">:defer</span> t)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org72da704" class="outline-2">
<h2 id="org72da704">Org-Mode</h2>
<div class="outline-text-2" id="text-org72da704">
<p>
Notes on completion: use <code>C-c C-l</code> to insert a path link and get completion.
</p>
<ul class="org-ul">
<li>alternatively company-mode will complete in the buffer, but will get in the way in the org-blocks.</li>
</ul>
</div>

<div id="outline-container-org9eb231d" class="outline-3">
<h3 id="org9eb231d">Mode setup</h3>
<div class="outline-text-3" id="text-org9eb231d">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn/org-mode-setup</span> ()
  (<span style="color: #a020f0;">unless</span> jmn-term
    (org-indent-mode))
  (variable-pitch-mode 1)
  (visual-line-mode 1)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">fix issue where it matches &gt; with partentheses -- may break blocks with &lt;&gt;</span>
  (modify-syntax-entry ?&lt; <span style="color: #8b2252;">"."</span>)
  (modify-syntax-entry ?&gt; <span style="color: #8b2252;">"."</span>)
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-org0645f0f" class="outline-3">
<h3 id="org0645f0f">Fonts</h3>
<div class="outline-text-3" id="text-org0645f0f">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn/org-font-setup</span> ()
  (<span style="color: #a020f0;">unless</span> jmn-term <span style="color: #b22222;">;; </span><span style="color: #b22222;">Replace list hyphen with dot</span>
    (font-lock-add-keywords
     'org-mode '((<span style="color: #8b2252;">"^ *</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">(</span><span style="color: #8b2252;">[-]</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">)</span><span style="color: #8b2252;"> "</span>
                  (0 (<span style="color: #a020f0;">prog1</span> () (compose-region (match-beginning 1)
                                               (match-end 1) <span style="color: #8b2252;">"&#8226;"</span>)))))))

  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Set faces for heading levels</span>
  (<span style="color: #a020f0;">let</span> ((jmn-org-hfont-alist '((gnu/linux . <span style="color: #8b2252;">"Cantarell"</span>)
                              (windows-nt . unspecified))))
    (<span style="color: #a020f0;">dolist</span> (face '((org-level-1 . 1.2)
                    (org-level-2 . 1.1)
                    (org-level-3 . 1.1)
                    (org-level-4 . 1.1)
                    (org-level-5 . 1.1)
                    (org-level-6 . 1.1)
                    (org-level-7 . 1.1)
                    (org-level-8 . 1.1)
                    ))
      (set-face-attribute (car face) nil
                          <span style="color: #483d8b;">:font</span> (alist-get system-type jmn-org-hfont-alist)
                          <span style="color: #483d8b;">:weight</span> 'regular <span style="color: #483d8b;">:height</span> (cdr face))))

  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Ensure that anything that should be fixed-pitch in Org files appears that way</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">(set-face-attribute 'org-block nil :foreground nil :inherit 'fixed-pitch) ;;warning</span>
  (set-face-attribute 'org-block nil <span style="color: #483d8b;">:foreground</span> '<span style="color: #008b8b;">unspecified</span>' <span style="color: #483d8b;">:inherit</span> 'fixed-pitch)
  (set-face-attribute 'org-code nil   <span style="color: #483d8b;">:inherit</span> '(shadow fixed-pitch))
  (set-face-attribute 'org-table nil   <span style="color: #483d8b;">:inherit</span> '(shadow fixed-pitch))
  (set-face-attribute 'org-verbatim nil <span style="color: #483d8b;">:inherit</span> '(shadow fixed-pitch))
  (set-face-attribute 'org-special-keyword nil
                      <span style="color: #483d8b;">:inherit</span> '(font-lock-comment-face fixed-pitch))
  (set-face-attribute 'org-meta-line nil
                      <span style="color: #483d8b;">:inherit</span> '(font-lock-comment-face fixed-pitch))
  (set-face-attribute 'org-checkbox nil <span style="color: #483d8b;">:inherit</span> 'fixed-pitch))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf482063" class="outline-3">
<h3 id="orgf482063">Start</h3>
<div class="outline-text-3" id="text-orgf482063">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'org-mode-hook  'jmn/org-mode-setup)

(<span style="color: #a020f0;">with-eval-after-load</span> 'org
  (jmn/org-font-setup)
  (<span style="color: #a020f0;">unless</span> (<span style="color: #a020f0;">or</span> jmn-term jmn-pure)
    (<span style="color: #a020f0;">setq</span> org-ellipsis <span style="color: #8b2252;">" &#9662;"</span>))
  (<span style="color: #a020f0;">setq</span> org-hide-emphasis-markers t
        org-src-fontify-natively t
        org-fontify-quote-and-verse-blocks t
        org-src-tab-acts-natively t
        org-edit-src-content-indentation 2 <span style="color: #b22222;">;; </span><span style="color: #b22222;">I undo this somewhere 4tangling</span>
        org-hide-block-startup nil
        org-src-preserve-indentation nil
        org-startup-folded 'content
        org-cycle-separator-lines 2
        org-capture-bookmark nil
        org-list-indent-offset 1
        org-image-actual-width nil    <span style="color: #b22222;">;; </span><span style="color: #b22222;">fix to allow picture resizing</span>
        org-return-follows-link t
        org-use-speed-commands t
        org-use-property-inheritance t  <span style="color: #b22222;">;; </span><span style="color: #b22222;">preperties to affect nested sections</span>
        org-export-babel-evaluate nil <span style="color: #b22222;">;; </span><span style="color: #b22222;">don't run src blocks on export</span>
        org-agenda-tags-column (alist-get
                                (system-name) '((<span style="color: #8b2252;">"xps"</span> . -85)
                                                (<span style="color: #8b2252;">"dsk"</span> . -90))
                                'auto nil 'string=)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org27866ff" class="outline-3">
<h3 id="org27866ff">Bullets</h3>
<div class="outline-text-3" id="text-org27866ff">
<p>
Archive: melpa
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">unless</span> (<span style="color: #a020f0;">or</span> jmn-term (not jmn-connected-beauty))
  (<span style="color: #a020f0;">use-package</span> org-bullets
    <span style="color: #483d8b;">:hook</span> (org-mode . org-bullets-mode)
    <span style="color: #483d8b;">:custom</span>
    (org-bullets-bullet-list '(<span style="color: #8b2252;">"&#9673;"</span> <span style="color: #8b2252;">"&#9675;"</span> <span style="color: #8b2252;">"&#9679;"</span> <span style="color: #8b2252;">"&#9675;"</span> <span style="color: #8b2252;">"&#9679;"</span> <span style="color: #8b2252;">"&#9675;"</span> <span style="color: #8b2252;">"&#9679;"</span>))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org26361de" class="outline-3">
<h3 id="org26361de">Center column and line wrapping</h3>
<div class="outline-text-3" id="text-org26361de">
<p>
Archive: melpa
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn/org-mode-visual-fill</span> ()
  (<span style="color: #a020f0;">setq</span> visual-fill-column-width 100
        visual-fill-column-center-text t)
  (visual-fill-column-mode 1))

(<span style="color: #a020f0;">use-package</span> visual-fill-column
  <span style="color: #483d8b;">:hook</span> (org-mode . jmn/org-mode-visual-fill))
</pre>
</div>
</div>
</div>

<div id="outline-container-org2ad622f" class="outline-3">
<h3 id="org2ad622f">Org-babel</h3>
<div class="outline-text-3" id="text-org2ad622f">
<p>
Either start a source block with  <code>&lt;[template]</code> or <code>C-c C-,</code> to select from org-select.
</p>

<p>
Notes:
Use # -<b>- org-src-preserve-indentation: t; -</b>- when doing tangle/detangle with python
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(org-babel-do-load-languages 'org-babel-load-languages
                             (append org-babel-load-languages
                                     '((shell  . t)
                                       (python . t)
                                       (makefile . t)
                                       (latex  . t)
                                       (C      . t))))

(<span style="color: #a020f0;">setq</span> org-confirm-babel-evaluate nil)

(<span style="color: #a020f0;">with-eval-after-load</span> 'org
  (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">org-tempo</span>)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">not needed after org version 9.2</span>
  (add-to-list 'org-structure-template-alist '(<span style="color: #8b2252;">"la"</span> . <span style="color: #8b2252;">"src latex"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #8b2252;">"m"</span> . <span style="color: #8b2252;">"src makefile"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #8b2252;">"js"</span> . <span style="color: #8b2252;">"src js"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #8b2252;">"sh"</span> . <span style="color: #8b2252;">"src shell"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #8b2252;">"el"</span> . <span style="color: #8b2252;">"src emacs-lisp"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #8b2252;">"py"</span> . <span style="color: #8b2252;">"src python  :results output"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #8b2252;">"pyim"</span> . <span style="color: #8b2252;">"src python :results file :var f=strNameWithDoubleQuotes</span>
<span style="color: #8b2252;">import matplotlib.pyplot as plt</span>
<span style="color: #8b2252;">plt.savefig(f)</span>
<span style="color: #8b2252;">f"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #8b2252;">"cpp"</span> . <span style="color: #8b2252;">"src C++  :includes &lt;iostream&gt;"</span>))
  (add-to-list 'org-structure-template-alist '(<span style="color: #8b2252;">"cppnm"</span> . <span style="color: #8b2252;">"src C++  :main no"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb460c04" class="outline-3">
<h3 id="orgb460c04">Inline latex</h3>
<div class="outline-text-3" id="text-orgb460c04">
<p>
Note: I had to install texlive dependencies for latex framents to work. I found what needed to be installed by running <code>pdflatex</code> on the generated tex file in <code>/tmp/</code> created by org.
</p>
<ul class="org-ul">
<li><code>sudo dnf install texlive-scheme-full</code></li>
<li>texlive-ulem</li>
</ul>

<p>
<b>Font size</b>:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defconst</span> <span style="color: #a0522d;">jmn-latex-scale</span> 1.2 <span style="color: #8b2252;">"scaling factor for latex fragments"</span>)
(<span style="color: #a020f0;">setq</span> org-format-latex-options (plist-put org-format-latex-options <span style="color: #483d8b;">:scale</span> jmn-latex-scale))
</pre>
</div>

<p>
Create a function to align the size of displayed latex framents with overall org-mode font size.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">update-org-latex-fragments</span> ()
  (org-latex-preview '(64))
  (plist-put org-format-latex-options <span style="color: #483d8b;">:scale</span>
             (+ jmn-latex-scale  (* 0.3 text-scale-mode-amount)))
  (org-latex-preview '(16)))
(add-hook 'text-scale-mode-hook 'update-org-latex-fragments)
</pre>
</div>
</div>
</div>

<div id="outline-container-org2c6f467" class="outline-3">
<h3 id="org2c6f467">Keybindings</h3>
<div class="outline-text-3" id="text-org2c6f467">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #8b2252;">"C-c x"</span>) #'org-html-export-to-html)
(global-set-key (kbd <span style="color: #8b2252;">"C-c s"</span>) #'org-store-link)
(global-set-key (kbd <span style="color: #8b2252;">"C-c i"</span>) #'org-insert-link)
(global-set-key (kbd <span style="color: #8b2252;">"C-c c"</span>) #'org-capture)
</pre>
</div>
</div>
</div>

<div id="outline-container-org4f806a7" class="outline-3">
<h3 id="org4f806a7">HTML</h3>
<div class="outline-text-3" id="text-org4f806a7">
</div>
<div id="outline-container-org474a696" class="outline-4">
<h4 id="org474a696">htmlize</h4>
<div class="outline-text-4" id="text-org474a696">
<p>
For syntax highlighting in export html, we want htmlize version &gt; <code>1.34</code>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> htmlize
  <span style="color: #483d8b;">:ensure</span> t
  <span style="color: #483d8b;">:defer</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc007ae6" class="outline-4">
<h4 id="orgc007ae6">Save to HTML on save</h4>
<div class="outline-text-4" id="text-orgc007ae6">
<p>
To have an org file convert to html on save, add the file name to the <code>org-files-to-html-on-save</code> in the file's local variables. This can be done in one of two ways:
</p>
<div class="org-src-container">
<pre class="src src-org"><span style="color: #b22222;"># -*- eval: (jmn-export-to-html-on-save) -*-</span>
<span style="font-weight: bold;">;; which </span><span style="font-weight: bold;">must</span> be the first line.
</pre>
</div>

<p>
Here we create a list of the files to convert on save and add a function to the after-save hook to
reference this list.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">initialize if not already</span>
(<span style="color: #a020f0;">if</span> (not (<span style="color: #a020f0;">bound-and-true-p</span> jmn-org-files-to-html-on-save))
    (<span style="color: #a020f0;">setq</span>  jmn-org-files-to-html-on-save nil))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-org-export-html-on-save-list</span>()
  (<span style="color: #a020f0;">when</span> (member (buffer-file-name)  jmn-org-files-to-html-on-save)
    (org-html-export-to-html)))

(add-hook 'after-save-hook #'jmn-org-export-html-on-save-list)

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-export-to-html-on-save</span>()
  (<span style="color: #a020f0;">interactive</span>)
  (add-to-list 'jmn-org-files-to-html-on-save (buffer-file-name)))
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="org279f685"></a>Make the local eval "safe"<br />
<div class="outline-text-5" id="text-org279f685">
<p>
The following removes the prompts when loading the buffer with the local variable
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'safe-local-variable-values '(eval jmn-export-to-html-on-save))
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-orgfcf6659" class="outline-4">
<h4 id="orgfcf6659">Make Read The Org setup file safe</h4>
<div class="outline-text-4" id="text-orgfcf6659">
<p>
Make the setup file safe for non-pure machines.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">if</span> (<span style="color: #a020f0;">and</span> (version&lt;= <span style="color: #8b2252;">"29"</span> emacs-version) (not jmn-pure))
    (<span style="color: #a020f0;">with-eval-after-load</span> 'org
      (add-to-list 'org-safe-remote-resources  <span style="color: #8b2252;">"\\`</span><span style="color: #008b8b;">https://fniessen\\.github\\.io/org-html-themes/org/theme-readtheorg\\.setup\\</span><span style="color: #8b2252;">'"</span>)))
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgfa8059c" class="outline-2">
<h2 id="orgfa8059c">Agenda and GTD</h2>
<div class="outline-text-2" id="text-orgfa8059c">
</div>
<div id="outline-container-orgf60dca9" class="outline-3">
<h3 id="orgf60dca9">General</h3>
<div class="outline-text-3" id="text-orgf60dca9">
<p>
Following the tutorial <a href="https://emacs.cafe/emacs/orgmode/gtd/2017/06/30/orgmode-gtd.html">here</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Org Agenda</span>
(<span style="color: #a020f0;">setq</span> org-agenda-window-setup 'other-window) <span style="color: #b22222;">;; </span><span style="color: #b22222;">other good option: reorganize-frame</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Exited with &#8216;</span><span style="color: #008b8b;">q</span><span style="color: #b22222;">&#8217; or &#8216;</span><span style="color: #008b8b;">x</span><span style="color: #b22222;">&#8217; and the old state is restored.</span>
(<span style="color: #a020f0;">setq</span> org-agenda-restore-windows-after-quit 1)
(<span style="color: #a020f0;">setq</span> org-agenda-span 'day)

<span style="color: #b22222;">;; </span><span style="color: #b22222;">SOMEDAY itmes are ommitted from GTD interface on purpose</span>
(<span style="color: #a020f0;">setq</span> org-todo-keywords '((sequence <span style="color: #8b2252;">"TODO(t)"</span> <span style="color: #8b2252;">"NEXT(n)"</span> <span style="color: #8b2252;">"HOLD(h)"</span> <span style="color: #8b2252;">"|"</span>
                                    <span style="color: #8b2252;">"DONE(d)"</span> <span style="color: #8b2252;">"IGNORE(i)"</span>)))

(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">find-lisp</span>) <span style="color: #b22222;">;; </span><span style="color: #b22222;">may not be needed</span>
(<span style="color: #a020f0;">setq</span> org-agenda-files (find-lisp-find-files jmn-gtd-directory <span style="color: #8b2252;">"</span><span style="color: #ff0000; font-weight: bold;">\</span><span style="color: #8b2252;">.org$"</span>))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">level/maxlevel = order in hierarchy</span>
(<span style="color: #a020f0;">setq</span> org-refile-targets
      '((<span style="color: #8b2252;">"projects.org"</span> <span style="color: #483d8b;">:maxlevel</span> . 2)
        (<span style="color: #8b2252;">"someday.org"</span> <span style="color: #483d8b;">:maxlevel</span> . 1)
        (<span style="color: #8b2252;">"whip.org"</span> <span style="color: #483d8b;">:level</span> . 1)
        (<span style="color: #8b2252;">"next.org"</span> <span style="color: #483d8b;">:level</span> . 0)))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">https://github.com/syl20bnr/spacemacs/issues/3094</span>
(<span style="color: #a020f0;">setq</span> org-refile-use-outline-path 'file org-outline-path-complete-in-steps nil)
(<span style="color: #a020f0;">setq</span> org-refile-allow-creating-parent-nodes 'confirm)

(<span style="color: #a020f0;">setq</span> org-agenda-prefix-format '((agenda . <span style="color: #8b2252;">" %i %-10:c%t [%e]% s "</span>)
                                 (todo . <span style="color: #8b2252;">" %i %-10:c [%-4e] "</span>)
                                 (tags . <span style="color: #8b2252;">" %i %-12:c"</span>)))

(<span style="color: #a020f0;">setq</span> org-deadline-warning-days 30)

(<span style="color: #a020f0;">setq</span> org-agenda-start-with-log-mode t)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">allows us to see closed in calendar</span>
(<span style="color: #a020f0;">setq</span> org-log-done 'time)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">creates CLOSED time tag</span>
(<span style="color: #a020f0;">setq</span> org-log-into-drawer t)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">creates a LOGBOOK drawer for notes</span>
(<span style="color: #a020f0;">setq</span> org-agenda-use-time-grid nil)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">no grid at top of agenda</span>

(<span style="color: #a020f0;">setq</span> org-agenda-custom-commands
      '((<span style="color: #8b2252;">"d"</span> <span style="color: #8b2252;">"Dashboard"</span>
         ((agenda <span style="color: #8b2252;">""</span>
                  ((org-deadline-warning-days 30)))
          (todo <span style="color: #8b2252;">"NEXT"</span>
                ((org-agenda-overriding-header <span style="color: #8b2252;">"Next Un-Scheduled Tasks"</span>)))
          (todo <span style="color: #8b2252;">"TODO"</span>
                ((org-agenda-overriding-header <span style="color: #8b2252;">"Active Un-Scheduled Tasks"</span>)))))

        (<span style="color: #8b2252;">" "</span> <span style="color: #8b2252;">"Agenda"</span>
         ((agenda <span style="color: #8b2252;">""</span>
                  ((org-agenda-span 'day)
                   (org-deadline-warning-days 7)))

          (todo <span style="color: #8b2252;">"TODO"</span>
                ((org-agenda-overriding-header <span style="color: #8b2252;">"To Refile"</span>)
                 (org-agenda-files (list (concat jmn-gtd-directory <span style="color: #8b2252;">"inbox.org"</span>)))))

          (todo <span style="color: #8b2252;">"NEXT"</span>
                ((org-agenda-overriding-header <span style="color: #8b2252;">"In Progress"</span>)
                 (org-agenda-files (list (concat jmn-gtd-directory <span style="color: #8b2252;">"projects.org"</span>)
                                         (concat jmn-gtd-directory <span style="color: #8b2252;">"next.org"</span>)
                                         (concat jmn-gtd-directory <span style="color: #8b2252;">"inbox.org"</span>)))))

          (todo <span style="color: #8b2252;">"TODO"</span>
                ((org-agenda-overriding-header <span style="color: #8b2252;">"Projects"</span>)
                 (org-agenda-files (list (concat jmn-gtd-directory  <span style="color: #8b2252;">"projects.org"</span>)))))

          (todo <span style="color: #8b2252;">"TODO"</span>
                ((org-agenda-overriding-header <span style="color: #8b2252;">"One-off Tasks"</span>)
                 (org-agenda-files (list (concat jmn-gtd-directory  <span style="color: #8b2252;">"next.org"</span>))))
                (org-agenda-skip-function '(org-agenda-skip-entry-if
                                            'deadline 'scheduled)))

          (todo <span style="color: #8b2252;">"HOLD"</span>
                    ((org-agenda-overriding-header <span style="color: #8b2252;">"HOLD"</span>)
                     (org-agenda-files (list (concat jmn-gtd-directory <span style="color: #8b2252;">"projects.org"</span>)
                                             (concat jmn-gtd-directory <span style="color: #8b2252;">"next.org"</span>)
                                             (concat jmn-gtd-directory <span style="color: #8b2252;">"inbox.org"</span>)))))
          ))))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-someday</span>() <span style="color: #8b2252;">"Quick access to someday.org (no links in agenda)"</span>
       (<span style="color: #a020f0;">interactive</span>)
       (find-file (concat jmn-gtd-directory <span style="color: #8b2252;">"someday.org"</span>)))

(<span style="color: #a020f0;">setq</span> org-agenda-todo-ignore-scheduled 'all) <span style="color: #b22222;">;; </span><span style="color: #b22222;">cant get it to work for deadlines</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3bb5e5b" class="outline-3">
<h3 id="org3bb5e5b">Habits</h3>
<div class="outline-text-3" id="text-org3bb5e5b">
<p>
File holding habits must be added to <code>org-agenda-files</code> above
</p>
<ul class="org-ul">
<li>habits must have the <code>:STYLE: habit</code> property</li>
</ul>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">org habit;;</span>
(add-to-list 'org-modules 'org-habit)
<span style="color: #b22222;">;;</span><span style="color: #b22222;">(require 'org-habit)</span>
(<span style="color: #a020f0;">with-eval-after-load</span> 'org-habit
  (<span style="color: #a020f0;">setq</span> org-habit-graph-column
        (alist-get (system-name) '((<span style="color: #8b2252;">"xps"</span> . 56)
                                   (<span style="color: #8b2252;">"dsk"</span> . 52))
                   50 nil 'string=))) <span style="color: #b22222;">;; </span><span style="color: #b22222;">default is 40</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6a1d59f" class="outline-3">
<h3 id="org6a1d59f">Capture Templates</h3>
<div class="outline-text-3" id="text-org6a1d59f">
<p>
<a href="https://orgmode.org/manual/Capture-templates.html">Capture templates (The Org Manual)</a>
</p>
<ul class="org-ul">
<li><code>C-c c i</code>  :   add an entry to the inbox</li>
<li><code>C-c c w</code>  :   add an entry to the whip
<ul class="org-ul">
<li>Creates a time stamp for now, need to add time for when I'd like to be reminded, <code>C-c .</code></li>
<li><code>C-c C-c</code> : adds tags to a heading</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">setq</span> org-capture-templates
      `((<span style="color: #8b2252;">"t"</span> <span style="color: #8b2252;">"Todo [inbox]"</span> entry
         (file ,(concat jmn-gtd-directory <span style="color: #8b2252;">"inbox.org"</span>))
         <span style="color: #8b2252;">"* TODO %i%?"</span> <span style="color: #483d8b;">:empty-lines</span> 1)

        (<span style="color: #8b2252;">"T"</span> <span style="color: #8b2252;">"Todo Today [inbox]"</span> entry
           (file ,(concat jmn-gtd-directory <span style="color: #8b2252;">"inbox.org"</span>))
           <span style="color: #8b2252;">"* TODO %?\nDEADLINE: %t"</span> <span style="color: #483d8b;">:empty-lines</span> 1)

        (<span style="color: #8b2252;">"l"</span> <span style="color: #8b2252;">"Linked Todo [inbox]"</span> entry
         (file ,(concat jmn-gtd-directory <span style="color: #8b2252;">"inbox.org"</span>))
         <span style="color: #8b2252;">"* TODO %i%? \n %a"</span> <span style="color: #483d8b;">:empty-lines</span> 1)

        (<span style="color: #8b2252;">"s"</span> <span style="color: #8b2252;">"Schedule"</span> entry
         (file+headline ,(concat jmn-gtd-directory <span style="color: #8b2252;">"whip.org"</span>)  <span style="color: #8b2252;">"Whip"</span>)
         <span style="color: #8b2252;">"* %i%? \n %U %^t"</span> <span style="color: #483d8b;">:empty-lines</span> 1)

        (<span style="color: #8b2252;">"j"</span> <span style="color: #8b2252;">"Journal"</span> entry
         (file+datetree ,(concat jmn-gtd-directory <span style="color: #8b2252;">"journal.org"</span>))
         <span style="color: #8b2252;">"* %?\nEntered on %U\n  %i\n  %a"</span>  <span style="color: #483d8b;">:empty-lines</span> 1)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org522f9a3" class="outline-3">
<h3 id="org522f9a3">Archive</h3>
<div class="outline-text-3" id="text-org522f9a3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">org-archive-done-tasks-tree</span> ()
  <span style="color: #8b2252;">"Archive all DONE tasks in the current org tree"</span>
  (<span style="color: #a020f0;">interactive</span>)
  (org-map-entries
   (<span style="color: #a020f0;">lambda</span> ()
     (org-archive-subtree)
     (<span style="color: #a020f0;">setq</span> org-map-continue-from (org-element-property <span style="color: #483d8b;">:begin</span> (org-element-at-point))))
   <span style="color: #8b2252;">"/DONE"</span> 'tree))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">org-archive-done-tasks-file</span> ()
  <span style="color: #8b2252;">"Archive all DONE tasks in the current org file"</span>
  (<span style="color: #a020f0;">interactive</span>)
  (org-map-entries
   (<span style="color: #a020f0;">lambda</span> ()
     (org-archive-subtree)
     (<span style="color: #a020f0;">setq</span> org-map-continue-from (org-element-property <span style="color: #483d8b;">:begin</span> (org-element-at-point))))
   <span style="color: #8b2252;">"/DONE"</span> 'file))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7296a08" class="outline-3">
<h3 id="org7296a08">Process Inbox Item</h3>
<div class="outline-text-3" id="text-org7296a08">
<p>
<a href="https://github.com/jethrokuan/.emacs.d/blob/master/init.el">https://github.com/jethrokuan/.emacs.d/blob/master/init.el</a>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">could set in the inbox header instead (where tags are set)</span>
(customize-set-variable 'org-global-properties
                        '((<span style="color: #8b2252;">"Effort_ALL"</span> . <span style="color: #8b2252;">"0:05 0:15 0:30 1:00 2:00 4:00"</span>)))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn/org-agenda-process-inbox-item</span> ()
  <span style="color: #8b2252;">"Process a single item in the org-agenda."</span>
  (<span style="color: #a020f0;">interactive</span>)
  (<span style="color: #a020f0;">org-with-wide-buffer</span>  <span style="color: #b22222;">; </span><span style="color: #b22222;">what does this do?</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">(org-agenda-set-tags) ; may want in the future</span>
   (org-agenda-priority)
   (org-agenda-set-effort)
   (org-agenda-refile nil nil t)))

(global-set-key (kbd <span style="color: #8b2252;">"C-c p"</span>) 'jmn/org-agenda-process-inbox-item)
</pre>
</div>
</div>
</div>

<div id="outline-container-org70b9d04" class="outline-3">
<h3 id="org70b9d04">Advice</h3>
<div class="outline-text-3" id="text-org70b9d04">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defmacro</span> <span style="color: #0000ff;">func-ignore</span> (fnc)
  <span style="color: #8b2252;">"Return function that ignores its arguments and invokes FNC."</span>
  `(<span style="color: #a020f0;">lambda</span> (<span style="color: #228b22;">&amp;rest</span> _rest)
     (funcall ,fnc)))

(advice-add 'org-archive-done-tasks-tree
            <span style="color: #483d8b;">:after</span> (<span style="color: #a020f0;">func-ignore</span> #'org-save-all-org-buffers))
(advice-add 'org-archive-done-tasks-file
            <span style="color: #483d8b;">:after</span> (<span style="color: #a020f0;">func-ignore</span> #'org-save-all-org-buffers))
(advice-add 'org-refile
            <span style="color: #483d8b;">:after</span> (<span style="color: #a020f0;">func-ignore</span> #'org-save-all-org-buffers))
(advice-add 'org-deadline
            <span style="color: #483d8b;">:after</span> (<span style="color: #a020f0;">func-ignore</span> #'org-save-all-org-buffers))
(advice-add 'org-schedule
            <span style="color: #483d8b;">:after</span> (<span style="color: #a020f0;">func-ignore</span> #'org-save-all-org-buffers))
(advice-add 'org-store-log-note
            <span style="color: #483d8b;">:after</span> (<span style="color: #a020f0;">func-ignore</span> #'org-save-all-org-buffers))
(advice-add 'org-todo
            <span style="color: #483d8b;">:after</span> (<span style="color: #a020f0;">func-ignore</span> #'org-save-all-org-buffers))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">if agenda is already open, update it with new capture;; work?</span>
(advice-add 'org-capture-finalize
             <span style="color: #483d8b;">:after</span> (<span style="color: #a020f0;">func-ignore</span> #'org-agenda-redo-all))
<span style="color: #b22222;">;; </span><span style="color: #b22222;">;; (advice-add 'org-capture-finalize</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">;;             :after (func-ignore #'org-agenda-redo-all))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd39e41f" class="outline-3">
<h3 id="orgd39e41f">Keybindings</h3>
<div class="outline-text-3" id="text-orgd39e41f">
<ul class="org-ul">
<li><code>C-c C-s</code>      :   scheduled timestamp</li>
<li><code>C-c C-d</code>      :   deadline timestamp</li>
<li><code>C-c C-w</code>      :   refile actionable/project items from inbox to appropriate area.</li>
<li><code>C-x C-s</code>      :   org-save-all-org-buffers</li>
<li><code>C-c C-x e</code>  :   org-set-effort</li>
<li><code>o</code>               :   open  agenda item in other window &#x2013;after my change</li>
<li><code>+</code>, <code>-</code> ,  <code>,</code>         :   increase, decrease, and set priority</li>
<li><code>Shift-right</code>  :  advance the todo state</li>
<li><code>S-&lt;down&gt;</code>   :         org-agenda-priority-down</li>
<li><code>S-&lt;left&gt;</code>   :      org-agenda-do-date-earlier</li>
<li><code>S-&lt;right&gt;</code> :       org-agenda-do-date-later</li>
<li><code>S-&lt;up&gt;</code>         :      org-agenda-priority-up</li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-agenda</span> (<span style="color: #228b22;">&amp;optional</span> arg) (<span style="color: #a020f0;">interactive</span> <span style="color: #8b2252;">"P"</span>) (org-agenda arg <span style="color: #8b2252;">" "</span>))

(global-set-key (kbd <span style="color: #8b2252;">"C-c a"</span>) 'jmn-agenda)

(<span style="color: #a020f0;">with-eval-after-load</span> 'org-agenda
  (define-key org-agenda-keymap (kbd <span style="color: #8b2252;">"o"</span>) 'org-agenda-goto)) <span style="color: #b22222;">;; </span><span style="color: #b22222;">more like dired</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb53eb1d" class="outline-2">
<h2 id="orgb53eb1d">Terminals</h2>
<div class="outline-text-2" id="text-orgb53eb1d">
</div>
<div id="outline-container-org0ed214b" class="outline-3">
<h3 id="org0ed214b">term-mode</h3>
<div class="outline-text-3" id="text-org0ed214b">
<ul class="org-ul">
<li>Slower than vterm at printing large amounts of information.</li>
<li>For more than one terminal, you must M-x rename-uniquely the terminal.</li>
<li>C-c prefix for term commands</li>
</ul>

<p>
Line-mode vs char-mode <b>selection shows on the modeline</b>:
C-c C-k -&gt; char-mode
C-c C-j  -&gt; line-mode
</p>
</div>
<div id="outline-container-org5debbad" class="outline-4">
<h4 id="org5debbad">Keybindings</h4>
<div class="outline-text-4" id="text-org5debbad">
<p>
Just some changes to make it feel more like the other modes.
</p>
<ul class="org-ul">
<li>I don't really use the <code>M-p</code> nor the <code>M-n</code>, but they could be nice.</li>
</ul>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">with-eval-after-load</span> 'term
  (define-key term-raw-map (kbd <span style="color: #8b2252;">"C-o"</span>) 'other-window)
  (define-key term-raw-map (kbd <span style="color: #8b2252;">"M-o"</span>) 'previous-multiframe-window)

  <span style="color: #b22222;">;; </span><span style="color: #b22222;">access prev commandsin line mode, though line and char-mode rings are separate</span>
  (define-key term-raw-map (kbd <span style="color: #8b2252;">"M-p"</span>) 'term-send-up)
  (define-key term-raw-map (kbd <span style="color: #8b2252;">"M-n"</span>) 'term-send-down)

  <span style="color: #b22222;">;; </span><span style="color: #b22222;">add "C-x" as escape character and use it for keybindings</span>
  (<span style="color: #a020f0;">let</span> (term-escape-char)
    (term-set-escape-char ?\C-x))
  (define-key term-raw-map (kbd <span style="color: #8b2252;">"C-x C-k"</span>) ' kill-current-buffer))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbc269b6" class="outline-4">
<h4 id="orgbc269b6">Better term-mode colors</h4>
<div class="outline-text-4" id="text-orgbc269b6">
<p>
Archive: melpa
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> eterm-256color
  <span style="color: #483d8b;">:hook</span> (term-mode . eterm-256color-mode))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4768b31" class="outline-3">
<h3 id="org4768b31">vterm</h3>
<div class="outline-text-3" id="text-org4768b31">
<p>
Faster terminal due to being compiled. Default is a better mode than term-mode; it's like a Char-mode but with ability to access function list with M-x.  <a href="https://github.com/akermu/emacs-libvterm">vterm Documentation</a>
</p>
<ul class="org-ul">
<li>For more than one terminal, you must M-x rename-uniquely the terminal.</li>
<li>C-c prefix for term commands</li>
<li>C-c C-c = send C-c to the terminal (kill running command)</li>
</ul>
<p>
<b>Extra installs needed:</b>
For some reason :ensure-system-package did not work here so it is done explicitly in the :init
Need to install: cmake, libtool
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> vterm
  <span style="color: #483d8b;">:ensure-system-package</span> ((cmake . <span style="color: #8b2252;">"sudo dnf install -y cmake"</span>)
                          (libtool . <span style="color: #8b2252;">"sudo dnf install -y libtool"</span> )) <span style="color: #b22222;">;; </span><span style="color: #b22222;">compilation</span>
  <span style="color: #483d8b;">:defer</span> t
  <span style="color: #483d8b;">:bind</span> (<span style="color: #483d8b;">:map</span> vterm-mode-map (<span style="color: #8b2252;">"C-o"</span> . other-window))
  <span style="color: #483d8b;">:config</span>
  (jmn-remove-M-1-9-from-mode-map vterm-mode-map)
  (<span style="color: #a020f0;">setq</span> vterm-max-scrollback 10000)
  <span style="color: #483d8b;">:init</span> (<span style="color: #a020f0;">let</span> ((package <span style="color: #8b2252;">"cmake"</span>))
           (<span style="color: #a020f0;">unless</span> (executable-find package)
             (async-shell-command (concat <span style="color: #8b2252;">"sudo dnf install -y "</span> package))))
         (<span style="color: #a020f0;">let</span> ((package <span style="color: #8b2252;">"libtool"</span>))
           (<span style="color: #a020f0;">unless</span> (executable-find package)
             (async-shell-command (concat <span style="color: #8b2252;">"sudo dnf install -y "</span> package)))))


(<span style="color: #a020f0;">use-package</span> vterm-toggle
  <span style="color: #483d8b;">:after</span> vterm
  <span style="color: #483d8b;">:config</span>
  (<span style="color: #a020f0;">setq</span> vterm-toggle-fullscreen-p nil)
  (global-set-key (kbd <span style="color: #8b2252;">"C-`"</span>) 'vterm-toggle)
  (add-to-list 'display-buffer-alist
               '((<span style="color: #a020f0;">lambda</span>(bufname _) (<span style="color: #a020f0;">with-current-buffer</span>
                                        bufname (equal major-mode 'vterm-mode)))
                 (display-buffer-reuse-window display-buffer-at-bottom)
                 <span style="color: #b22222;">;;</span><span style="color: #b22222;">(display-buffer-reuse-window display-buffer-in-direction)</span>
                 <span style="color: #b22222;">;;</span><span style="color: #b22222;">display-buffer-in-direction/direction/dedicated is added in emacs27</span>
                 <span style="color: #b22222;">;;</span><span style="color: #b22222;">(direction . bottom)</span>
                 <span style="color: #b22222;">;;</span><span style="color: #b22222;">(dedicated . t) ;dedicated is supported in emacs27</span>
                 (reusable-frames . visible)
                 (window-height . 0.3))))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgadf7fda" class="outline-2">
<h2 id="orgadf7fda">Theme and Frame</h2>
<div class="outline-text-2" id="text-orgadf7fda">
</div>
<div id="outline-container-org5cc92be" class="outline-3">
<h3 id="org5cc92be">Setup and helpers</h3>
<div class="outline-text-3" id="text-org5cc92be">
<p>
Helpful functions
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">setq</span> custom-safe-themes t) <span style="color: #b22222;">;; </span><span style="color: #b22222;">don't ask if theme is safe</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-disable-theme</span>()
  (<span style="color: #a020f0;">interactive</span>)
  (disable-theme (car custom-enabled-themes)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org356d0e0" class="outline-3">
<h3 id="org356d0e0">Theme Packages</h3>
<div class="outline-text-3" id="text-org356d0e0">
</div>
<div id="outline-container-org3488cb9" class="outline-4">
<h4 id="org3488cb9">Gruvbox</h4>
<div class="outline-text-4" id="text-org3488cb9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">use-package</span> gruvbox-theme)

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-set-gruv-org-faces</span> (props)
  <span style="color: #8b2252;">"Function used by all gruvbox themes for setting or faces"</span>

  (<span style="color: #a020f0;">with-eval-after-load</span> 'org
    (set-face-foreground 'org-priority (face-foreground font-lock-constant-face))
    (set-face-foreground 'org-agenda-done (alist-get 'done-color props))
    (set-face-foreground 'org-headline-done (alist-get 'done-color props))
    (set-face-foreground 'org-done (alist-get 'done-color props))

    (set-face-attribute 'org-block-begin-line nil <span style="color: #483d8b;">:inherit</span> 'font-lock-comment-face)
    (set-face-attribute 'org-block-end-line nil <span style="color: #483d8b;">:inherit</span> 'font-lock-comment-face)
    (set-face-background 'org-block-begin-line (face-background `default))
    (set-face-background 'org-block-end-line (face-background `default))

    (<span style="color: #a020f0;">setq</span> org-todo-keyword-faces
          `((<span style="color: #8b2252;">"NEXT"</span> . ,(face-foreground font-lock-function-name-face))
            (<span style="color: #8b2252;">"HOLD"</span> . ,(face-foreground font-lock-builtin-face))
            (<span style="color: #8b2252;">"DONE"</span> . ,(alist-get 'done-color props))))

    (<span style="color: #a020f0;">if</span> (alist-get 'org-block props)
        (set-face-background 'org-block (alist-get 'org-block props)))))


(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-load-gruvbox-dark-medium</span> ()
  <span style="color: #8b2252;">"Theme for dark time"</span>
  (<span style="color: #a020f0;">interactive</span>)
  (disable-theme (car custom-enabled-themes))
  (load-theme 'gruvbox-dark-medium t)
  (set-face-background 'line-number
                       (face-attribute 'default <span style="color: #483d8b;">:background</span>))

  <span style="color: #b22222;">;; </span><span style="color: #b22222;">(set-face-foreground 'default "gray75") ;; default "#ebdbb2"</span>
  (set-face-foreground 'default <span style="color: #8b2252;">"moccasin"</span>) <span style="color: #b22222;">;; </span><span style="color: #b22222;">default "#ebdbb2"</span>
  (set-face-foreground 'font-lock-comment-face  <span style="color: #8b2252;">"#98be65"</span>) <span style="color: #b22222;">;; </span><span style="color: #b22222;">default "#ebdbb2"</span>
  (jmn-set-gruv-org-faces '((done-color . <span style="color: #8b2252;">"gray35"</span> ))))


(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-load-gruvbox-dark-hard</span> ()
  <span style="color: #8b2252;">"Theme for very dark time"</span>
  (<span style="color: #a020f0;">interactive</span>)
  (disable-theme (car custom-enabled-themes))
  (load-theme 'gruvbox-dark-hard t)

  (set-face-foreground 'default <span style="color: #8b2252;">"bisque2"</span>) <span style="color: #b22222;">;; </span><span style="color: #b22222;">default "#ebdbb2"</span>

  (set-face-background 'mode-line-inactive <span style="color: #8b2252;">"gray22"</span>)
  (set-face-background 'mode-line-active   <span style="color: #8b2252;">"gray35"</span>)

  (set-face-background 'line-number
                       (face-attribute 'default <span style="color: #483d8b;">:background</span>))
  (set-face-background 'fringe
                       (face-attribute 'default <span style="color: #483d8b;">:background</span>))

  (set-face-foreground 'font-lock-comment-face  <span style="color: #8b2252;">"#98be65"</span>) <span style="color: #b22222;">;; </span><span style="color: #b22222;">default "#ebdbb2"</span>
  (set-face-foreground 'font-lock-string-face  <span style="color: #8b2252;">"LightGoldenrod3"</span>)
  (set-face-foreground 'font-lock-builtin-face  <span style="color: #8b2252;">"Orange3"</span>)
  (jmn-set-gruv-org-faces '((done-color . <span style="color: #8b2252;">"gray35"</span> )
                            (org-block-begin-line . <span style="color: #8b2252;">"gray14"</span>)
                            (org-block-end-line . <span style="color: #8b2252;">"gray14"</span>)
                            (org-block . <span style="color: #8b2252;">"gray7"</span>))))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-load-gruvbox-light-medium</span>()
  <span style="color: #8b2252;">"Theme for light time"</span>
  (<span style="color: #a020f0;">interactive</span>)
  (disable-theme (car custom-enabled-themes))
  (load-theme 'gruvbox-light-medium t)

  (jmn-set-gruv-org-faces '((done-color . <span style="color: #8b2252;">"Navajowhite3"</span> ))))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-load-gruvbox-light-hard</span>()
  <span style="color: #8b2252;">"Theme for very light time"</span>
  (<span style="color: #a020f0;">interactive</span>)
  (disable-theme (car custom-enabled-themes))
  (load-theme 'gruvbox-light-hard t)

  (jmn-set-gruv-org-faces '((done-color . <span style="color: #8b2252;">"Navajowhite3"</span> )
                            (org-block . <span style="color: #8b2252;">"#fbf1c7"</span>)))) <span style="color: #b22222;">;; </span><span style="color: #b22222;">default "#f9f5d7"</span>

  (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-load-gruvbox-light-soft</span>()
  <span style="color: #8b2252;">"Theme for very light time"</span>
  (<span style="color: #a020f0;">interactive</span>)
  (disable-theme (car custom-enabled-themes))
  (load-theme 'gruvbox-light-soft t)

  (jmn-set-gruv-org-faces '((done-color . <span style="color: #8b2252;">"Navajowhite3"</span> )
                            (org-block . <span style="color: #8b2252;">"#ebdbb2"</span>)))) <span style="color: #b22222;">;; </span><span style="color: #b22222;">default "#f9f5d7"</span>

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org88341b1" class="outline-3">
<h3 id="org88341b1">Pure Themes</h3>
<div class="outline-text-3" id="text-org88341b1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-load-pure-dark-theme</span>()
  (load-theme 'wombat)
  (<span style="color: #a020f0;">with-eval-after-load</span> 'org
    (set-face-background 'org-block <span style="color: #8b2252;">"gray8"</span>))
  (<span style="color: #a020f0;">with-eval-after-load</span> 'tab-bar
    (<span style="color: #a020f0;">dolist</span> (face '(tab-bar tab-bar-tab tab-bar-tab-inactive))
      (set-face-attribute  face nil
                           <span style="color: #483d8b;">:foreground</span> (face-foreground 'default)
                           <span style="color: #483d8b;">:background</span> (face-background 'default)
                           <span style="color: #483d8b;">:weight</span> 'regular))
    (set-face-background 'tab-bar-tab <span style="color: #8b2252;">"gray25"</span>)))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-load-pure-light-theme</span>()
  (<span style="color: #a020f0;">with-eval-after-load</span> 'org
    (set-face-background 'org-block <span style="color: #8b2252;">"gray93"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org2d2c248" class="outline-3">
<h3 id="org2d2c248">Frame Height</h3>
<div class="outline-text-3" id="text-org2d2c248">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">if</span> (window-system)
    (set-frame-height (selected-frame) 54))
</pre>
</div>
</div>
</div>
<div id="outline-container-org3512f54" class="outline-3">
<h3 id="org3512f54">Default and time switches</h3>
<div class="outline-text-3" id="text-org3512f54">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">if</span> jmn-pure
    (<span style="color: #a020f0;">if</span> jmn-dark-mode
        (<span style="color: #a020f0;">if</span> (eq system-type 'gnu/linux)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">pure dark linux</span>
            (jmn-load-pure-dark-theme)
          (<span style="color: #a020f0;">progn</span> <span style="color: #b22222;">;; </span><span style="color: #b22222;">pure dark windows</span>
            (print <span style="color: #8b2252;">"No dark-mode for windows- setting light mode"</span>)
            (jmn-load-pure-light-theme)))
      (jmn-load-pure-light-theme))  <span style="color: #b22222;">;; </span><span style="color: #b22222;">pure light</span>

  (<span style="color: #a020f0;">if</span> jmn-dark-mode  <span style="color: #b22222;">;; </span><span style="color: #b22222;">non-pure and dark</span>
      (jmn-load-gruvbox-dark-hard)
    (jmn-load-gruvbox-light-medium)))  <span style="color: #b22222;">;; </span><span style="color: #b22222;">non-pure and light</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org07d5fef" class="outline-2">
<h2 id="org07d5fef">Shell Backend and Windows Core Setup</h2>
<div class="outline-text-2" id="text-org07d5fef">
</div>
<div id="outline-container-org8fedc49" class="outline-3">
<h3 id="org8fedc49">Linux</h3>
<div class="outline-text-3" id="text-org8fedc49">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">if</span> (eq system-type 'gnu/linux)
    (<span style="color: #a020f0;">setq</span> shell-command-switch <span style="color: #8b2252;">"-ic"</span>))  <span style="color: #b22222;">;; </span><span style="color: #b22222;">add -i so it loads .bashrc (aliases!)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7b1ff41" class="outline-3">
<h3 id="org7b1ff41">Windows</h3>
<div class="outline-text-3" id="text-org7b1ff41">
<p>
Major changes for windows. Small changes also exist in the rest of the config.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">cond</span>
 ((eq system-type 'windows-nt)
  <span style="color: #b22222;">;;</span><span style="color: #b22222;">set font</span>
  (<span style="color: #a020f0;">when</span> (member <span style="color: #8b2252;">"Consolas"</span> (font-family-list))
    (set-frame-font <span style="color: #8b2252;">"Consolas"</span> t t))

  (add-hook 'shell-mode-hook 'ansi-color-for-comint-mode-on) <span style="color: #b22222;">;; </span><span style="color: #b22222;">needed?</span>
  (add-hook 'term-mode-hook 'ansi-color-for-comint-mode-on)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">needed?</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq explicit-shell-file-name "c:/Program Files/Git/bin/bash.exe") ;; gitbash</span>

  (<span style="color: #a020f0;">setq</span> explicit-shell-file-name <span style="color: #8b2252;">"c:/Program Files/Emacs/libexec/emacs/27.2/x86_64-w64-mingw32/cmdproxy.exe"</span>) <span style="color: #b22222;">;; </span><span style="color: #b22222;">Emacs recommended</span>
  (<span style="color: #a020f0;">setq</span> shell-file-name explicit-shell-file-name)

  <span style="color: #b22222;">;; </span><span style="color: #b22222;">give emacs access to gnu coreutils, though should already be in =path=</span>
  (add-to-list 'exec-path <span style="color: #8b2252;">"c:/Program Files/Git/"</span>) <span style="color: #b22222;">;; </span><span style="color: #b22222;">git-bash, git-cmd</span>
  (add-to-list 'exec-path <span style="color: #8b2252;">"c:/Program Files/Git/bin"</span>) <span style="color: #b22222;">;; </span><span style="color: #b22222;">bash</span>
  (add-to-list 'exec-path <span style="color: #8b2252;">"c:/Program Files/Git/usr/bin"</span>) <span style="color: #b22222;">;; </span><span style="color: #b22222;">coreutils (diff, ls, etc.)</span>
  (add-to-list 'exec-path <span style="color: #8b2252;">"c:/Program Files/Python312"</span>) <span style="color: #b22222;">;; </span><span style="color: #b22222;">python-- not working</span>

  <span style="color: #b22222;">;; </span><span style="color: #b22222;">likey no octave, so read only matlab files</span>
  (add-hook 'octave-mode-hook 'read-only-mode)

  <span style="color: #b22222;">;; </span><span style="color: #b22222;">external ls for directories first support (dired) -- may not be needed with above</span>
  (<span style="color: #a020f0;">setq</span> ls-lisp-use-insert-directory-program t)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">use external ls</span>
  (<span style="color: #a020f0;">setq</span> inserft-directory-program <span style="color: #8b2252;">"c:/Program Files/Git/user/bin/ls.exe"</span>) <span style="color: #b22222;">;; </span><span style="color: #b22222;">ls loc</span>
  ))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge53e95d" class="outline-2">
<h2 id="orge53e95d">Hacky Fixes</h2>
<div class="outline-text-2" id="text-orge53e95d">
</div>
<div id="outline-container-org8d7fb9f" class="outline-3">
<h3 id="org8d7fb9f">Corrects error: File mode specification error: (error Invalid image type ‘svg’) (not used)</h3>
<div class="outline-text-3" id="text-org8d7fb9f">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">setq</span> image-types '(svg png gif tiff jpeg xpm xbm pbm))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdf42a23" class="outline-3">
<h3 id="orgdf42a23">Keep transparency when toggling to full-screen in Emacs 29+</h3>
<div class="outline-text-3" id="text-orgdf42a23">
<p>
Was needed at one point&#x2013; keeping just in case it is need in the future.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">if</span> (version&lt;= <span style="color: #8b2252;">"29"</span> emacs-version)
    (<span style="color: #a020f0;">progn</span>
      (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">toggle-full-screen-with-transparency</span> ()
        <span style="color: #8b2252;">"Toggle full screen and adjust frame transparency."</span>
        (<span style="color: #a020f0;">interactive</span>)
        (<span style="color: #a020f0;">let</span> ((current-alpha (frame-parameter nil 'alpha-background)))
          (transparency 100)
          (toggle-frame-fullscreen)
          (sit-for 0.7)
          (transparency current-alpha)
          ))
      (global-unset-key (kbd <span style="color: #8b2252;">"&lt;f11&gt;"</span>))
      (global-set-key (kbd <span style="color: #8b2252;">"&lt;f11&gt;"</span>) 'toggle-full-screen-with-transparency)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb16c00d" class="outline-3">
<h3 id="orgb16c00d">Transparency in term (<code>emacs -nw</code>)</h3>
<div class="outline-text-3" id="text-orgb16c00d">
<p>
source: <a href="https://github.com/syl20bnr/spacemacs/issues/7262">https://github.com/syl20bnr/spacemacs/issues/7262</a>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-set-background-unspecified</span> ()
  <span style="color: #8b2252;">"Set background of buffer and line numbers to unspecified"</span>
  (<span style="color: #a020f0;">interactive</span>)
  (set-face-background 'default <span style="color: #8b2252;">"unspecified-bg"</span> (selected-frame))
  (set-face-background 'line-number <span style="color: #8b2252;">"unspecified-bg"</span>))

(<span style="color: #a020f0;">if</span> jmn-term
    (add-hook 'window-setup-hook 'jmn-set-background-unspecified))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3bc8ea1" class="outline-2">
<h2 id="org3bc8ea1">Startup and Tabs</h2>
<div class="outline-text-2" id="text-org3bc8ea1">
</div>
<div id="outline-container-org6f456e0" class="outline-3">
<h3 id="org6f456e0">Recentf</h3>
<div class="outline-text-3" id="text-org6f456e0">
<p>
Recentf is needed for recent files on the dashboard.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(recentf-mode 1) <span style="color: #b22222;">;; </span><span style="color: #b22222;">needed for recent files in dashboard</span>
(<span style="color: #a020f0;">setq</span> recentf-max-menu-items 25) <span style="color: #b22222;">;; </span><span style="color: #b22222;">max number of entries</span>
(run-at-time nil (* 5 60) 'recentf-save-list) <span style="color: #b22222;">;; </span><span style="color: #b22222;">save recent files periodically</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Exclude the following files from the recents list</span>
(add-to-list 'recentf-exclude <span style="color: #8b2252;">"~/.emacs.d/recentf"</span>)
(add-to-list 'recentf-exclude (concat jmn-gtd-directory <span style="color: #8b2252;">"inbox.org"</span>))
(add-to-list 'recentf-exclude (concat jmn-gtd-directory <span style="color: #8b2252;">"next.org"</span>))
(add-to-list 'recentf-exclude (concat jmn-gtd-directory <span style="color: #8b2252;">"whip.org"</span>))
(add-to-list 'recentf-exclude (concat jmn-gtd-directory <span style="color: #8b2252;">"someday.org"</span>))
(add-to-list 'recentf-exclude (concat jmn-gtd-directory <span style="color: #8b2252;">"journal.org"</span>))
(add-to-list 'recentf-exclude (concat jmn-gtd-directory <span style="color: #8b2252;">"habits.org"</span>))
(add-to-list 'recentf-exclude
             (concat (file-name-directory jmn-config-location) <span style="color: #8b2252;">"emacs.html"</span>))

(<span style="color: #a020f0;">if</span> (<span style="color: #a020f0;">or</span> jmn-pure (not jmn-connected-beauty))
    (<span style="color: #a020f0;">progn</span>
      <span style="color: #b22222;">;; </span><span style="color: #b22222;">display recent files on startup</span>
      <span style="color: #b22222;">;; </span><span style="color: #b22222;">(add-hook 'after-init-hook (lambda () (recentf-open-files)))</span>
      <span style="color: #b22222;">;; </span><span style="color: #b22222;">display projects.org on startup</span>
      (add-hook 'after-init-hook
                (<span style="color: #a020f0;">lambda</span> () (find-file
                            (concat jmn-gtd-directory <span style="color: #8b2252;">"projects.org"</span>))))
      <span style="color: #b22222;">;; </span><span style="color: #b22222;">make display recent files the dashboard command</span>
      (global-set-key (kbd <span style="color: #8b2252;">"C-c d"</span>) 'recentf-open-files)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org66c2659" class="outline-3">
<h3 id="org66c2659">Tabs</h3>
<div class="outline-text-3" id="text-org66c2659">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">if</span> (version&lt;= <span style="color: #8b2252;">"27"</span> emacs-version)
    (<span style="color: #a020f0;">progn</span>
      (<span style="color: #a020f0;">setq</span> tab-bar-close-button-show nil        <span style="color: #b22222;">; </span><span style="color: #b22222;">remove close button</span>
            tab-bar-show 1                       <span style="color: #b22222;">; </span><span style="color: #b22222;">only show tab bar if #tabs&gt;1</span>
            tab-bar-select-tab-modifiers '(meta) <span style="color: #b22222;">; </span><span style="color: #b22222;">Alt-i switch to the tab numbered i</span>
            tab-bar-tab-hints t)                 <span style="color: #b22222;">; </span><span style="color: #b22222;">show a number on each tabs</span>

      (tab-bar-mode 1)
      (tab-bar-close-other-tabs))) <span style="color: #b22222;">; </span><span style="color: #b22222;">ensures (tab-bar-mode 1) works on older systems</span>


(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">jmn-create-my-tabs</span>()
  <span style="color: #8b2252;">"Create my default tabs"</span>
  (<span style="color: #a020f0;">interactive</span>)
  (tab-close-other)
  (delete-other-windows)
  (tab-bar-rename-tab <span style="color: #8b2252;">"gtd"</span>)
  (find-file (concat jmn-gtd-directory <span style="color: #8b2252;">"projects.org"</span>))
  (jmn-agenda)

  (tab-bar-new-tab)
  (tab-bar-rename-tab <span style="color: #8b2252;">"workspace"</span>)
  (switch-to-buffer <span style="color: #8b2252;">"projects.org"</span>)

  (tab-bar-new-tab)
  (<span style="color: #a020f0;">if</span> jmn-pure
      (<span style="color: #a020f0;">progn</span>
        (term <span style="color: #8b2252;">"/bin/bash"</span>)
        (tab-bar-rename-tab <span style="color: #8b2252;">"term"</span>))
    (<span style="color: #a020f0;">progn</span>
      (vterm)
      (tab-bar-rename-tab <span style="color: #8b2252;">"vterm"</span>)))


  (tab-bar-new-tab)
  (tab-bar-rename-tab <span style="color: #8b2252;">"config"</span>)
  (find-file jmn-config-location)
  (magit-status)

  (tab-bar-select-tab 2))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc28fef1" class="outline-3">
<h3 id="orgc28fef1">Dashboard</h3>
<div class="outline-text-3" id="text-orgc28fef1">
<p>
Dash board for initial startup of emacs. <a href="https://github.com/emacs-dashboard/emacs-dashboard">github link</a>
</p>
<ul class="org-ul">
<li>For the icons to display correctly, I needed  to execute <code>all-of-the-icons-install-fonts</code>.</li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">if</span> jmn-connected-beauty
  (<span style="color: #a020f0;">use-package</span> dashboard
    <span style="color: #483d8b;">:ensure</span> t
    <span style="color: #483d8b;">:init</span>     (dashboard-setup-startup-hook)
    <span style="color: #483d8b;">:bind</span> ( <span style="color: #8b2252;">"C-c d"</span> . dashboard-open)
    <span style="color: #483d8b;">:config</span>
    (<span style="color: #a020f0;">setq</span> dashboard-startup-banner 2)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">(nil . no-banner)  ([1-5] . plain-text banners)</span>
    (<span style="color: #a020f0;">setq</span> dashboard-center-content 1)
    (<span style="color: #a020f0;">setq</span> dashboard-show-shortcuts 1)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">show the single-character shortcuts</span>
    (<span style="color: #a020f0;">setq</span> dashboard-items '((recents  . 5)
                            (bookmarks . 5)
                            (projects . 5)
                            (agenda . 5)
                            (registers . 5)))

    (setcdr (assoc 'projects dashboard-item-shortcuts) <span style="color: #8b2252;">"j"</span>)
    (<span style="color: #a020f0;">setq</span> dashboard-set-heading-icons t)
    (<span style="color: #a020f0;">setq</span> dashboard-set-file-icons t)
    (<span style="color: #a020f0;">setq</span> dashboard-projects-backend 'project-el)
    (dashboard-modify-heading-icons '((recents . <span style="color: #8b2252;">"file-text"</span>)))
    (<span style="color: #a020f0;">setq</span> dashboard-set-footer nil))

  (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-dashboard-hook</span>()
    <span style="color: #8b2252;">"Needed to define these after hook for some reason"</span>
    (define-key dashboard-mode-map (kbd <span style="color: #8b2252;">"n"</span>)  'dashboard-next-line)
    (define-key dashboard-mode-map (kbd <span style="color: #8b2252;">"p"</span>)  'dashboard-previous-line))

  (add-hook 'dashboard-mode-hook 'my-dashboard-hook))
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: ape</p>
<p class="date">Created: 2024-02-03 Sat 15:47</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
